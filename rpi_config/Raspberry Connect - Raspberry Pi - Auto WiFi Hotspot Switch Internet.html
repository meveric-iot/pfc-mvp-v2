<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0095)http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet -->
<html prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr" slick-uniqueid="3"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
          
            <!--<base href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet">--><base href=".">
  
  <meta name="keywords" content="access point, hotspot, ap, ssh, vnc, raspberry pi, rpi, raspberryconnect, rpi3, rpi2, zero, zero w, autoswitch, autohotspot, #raspberrypi">
  <meta name="title" content="Raspberry Pi - Auto WiFi Hotspot Switch Internet">
  <meta property="og:url" content="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet">
  <meta property="og:title" content="Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet">
  <meta property="og:type" content="article">
  <meta property="og:image" content="http://www.raspberryconnect.com/media/k2/items/cache/2cd9d1d7bb30511eb4cd517c131ae148_S.jpg">
  <meta name="image" content="http://www.raspberryconnect.com/media/k2/items/cache/2cd9d1d7bb30511eb4cd517c131ae148_S.jpg">
  <meta property="og:description" content="Switch between network wifi and a internet hotspot for the Raspbery Pi without a reboot. Use you Raspberry Pi on the move.">
  <meta name="description" content="Switch between network wifi and a internet hotspot for the Raspbery Pi without a reboot. Use you Raspberry Pi on the move.">
  <title>Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet</title>
  <link href="http://www.raspberryconnect.com/templates/raspconnect2/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
  <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/magnific-popup.min.css" type="text/css">
  <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/simple-line-icons.min.css" type="text/css">
  <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/k2.css" type="text/css">
  <style type="text/css">

						/* K2 - Magnific Popup Overrides */
						.mfp-iframe-holder {padding:10px;}
						.mfp-iframe-holder .mfp-content {max-width:100%;width:100%;height:100%;}
						.mfp-iframe-scaler iframe {background:#fff;padding:10px;box-sizing:border-box;box-shadow:none;}
					
  </style>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/cb=gapi.loaded_1" async=""></script><script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/cb=gapi.loaded_0" async=""></script><script id="twitter-wjs" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/widgets.js"></script><script type="text/javascript" async="" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/plusone.js" gapi_processed="true"></script><script id="facebook-jssdk" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/all.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/recaptcha__ru.js"></script><script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/jquery.min.js" type="text/javascript"></script><style></style>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/jquery-noconflict.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/jquery-migrate.min.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/jquery.magnific-popup.min.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/k2.frontend.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/api.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/bootstrap.min.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/mootools-core.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/core.js" type="text/javascript"></script>
  <script src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/mootools-more.js" type="text/javascript"></script>
  <script type="text/javascript">
function onK2RecaptchaLoaded(){grecaptcha.render("recaptcha", {"sitekey" : "6Lcbtt4SAAAAAG_J-tXSdYtyVqTQ4a5KjBPLqvfK"});}
jQuery(document).ready(function(){
	jQuery('.hasTooltip').tooltip({"html": true,"container": "body"});
});
  </script>

          
                <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/system.css" type="text/css">
                <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/position.css" type="text/css" media="screen,projection">
                <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/layout.css" type="text/css" media="screen,projection">
                <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/print.css" type="text/css" media="print">
                <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/general.css" type="text/css">
                <link rel="stylesheet" href="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/personal.css" type="text/css">
                <!--[if lte IE 6]>
                <link href="/templates/raspconnect2/css/ieonly.css" rel="stylesheet" type="text/css" />

                                <style type="text/css">
                #line
                {      width:98% ;
                }
                .logoheader
                {
                        height:200px;

                }
                #header ul.menu
                {
                display:block !important;
                      width:98.2% ;


                }
                 </style>
                                <![endif]-->
                <!--[if IE 7]>
                        <link href="/templates/raspconnect2/css/ie7only.css" rel="stylesheet" type="text/css" />
                <![endif]-->
                <script type="text/javascript" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/hide.js"></script>

                <script type="text/javascript">
                        var big ='72%';
                        var small='53%';
                  /* Disable right menu collapse option 1 of 3 
                  var altopen='is open';
                  var altclose='is closed'; */
                        var bildauf='/templates/raspconnect2/images/plus.png';
                        var bildzu='/templates/raspconnect2/images/minus.png';
                  /*    Disable right menu collapse option 2 of 3 
                  var rightopen='Open info';
                  var rightclose='Close info'; */
   
                  /*                  var fontSizeTitle='Font size';
                        var bigger='Bigger';
                        var reset='Reset';
                        var smaller='Smaller';
                        var biggerTitle='Increase size';
                        var resetTitle='Revert styles to default';
                        var smallerTitle='Decrease size';
                  */
                </script>
          <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37960809-1']);
  _gaq.push(['_setDomainName', 'raspberryconnect.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

        <script type="text/javascript" charset="utf-8" async="" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/button.bf357a6ba1a5f1fa0ddb61377ae3add5.js"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_customer_chat_bounce_in{animation-duration:250ms;animation-name:fb_bounce_in}.fb_customer_chat_bounce_out{animation-duration:250ms;animation-name:fb_fade_out}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}.fb_mobile_overlay_active{background-color:#fff;height:100%;overflow:hidden;position:fixed;visibility:hidden;width:100%}@keyframes fb_fade_out{from{opacity:1}to{opacity:0}}@keyframes fb_bounce_in{0%{opacity:0;transform:scale(.8, .8);transform-origin:100% 100%}10%{opacity:.1}20%{opacity:.2}30%{opacity:.3}40%{opacity:.4}50%{opacity:.5}60%{opacity:.6}70%{opacity:.7}80%{opacity:.8;transform:scale(1.03, 1.03)}90{opacity:.9}100%{opacity:1;transform:scale(1, 1)}}</style></head>

        <body>

          <div id="all">
        <div id="back">
                <div id="header">
                                <div class="logoheader">
                                        <h1 id="logo">

                                                                                                                                                                                                        <span class="header1">
                                        Projects of the Raspberry Pi Community.                                        </span></h1>
                                </div><!-- end logoheader -->
                                        <ul class="skiplinks">
                                                <li><a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#main" class="u2">Skip to content</a></li>
                                                <li><a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#nav" class="u2">Jump to main navigation and login</a></li>
                                                                                        <li><a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#additional" class="u2">Jump to additional information</a></li>
                                                                                   </ul>
                                        <h2 class="unseen">Nav view search</h2>
                                        <h3 class="unseen">Navigation</h3>
                                        <ul class="nav menu">
<li class="item-101"><a href="http://www.raspberryconnect.com/">Home</a></li><li class="item-186"><a href="http://www.raspberryconnect.com/about-raspberryconnect">About</a></li><li class="item-124"><a href="http://www.raspberryconnect.com/user-projects">RPi Projects</a></li><li class="item-127"><a href="http://www.raspberryconnect.com/software">Software</a></li><li class="item-128"><a href="http://www.raspberryconnect.com/webdirectory">Web Directory</a></li><li class="item-160"><a href="http://www.raspberryconnect.com/mainsearch">Search</a></li></ul>

                                       
                                        <div id="line">
                                                                                
                                      <h3 class="unseen">Search</h3>
                                        
                                        </div><!-- end line -->


                        </div><!-- end header -->
                        <div id="contentarea2">
                                        <div id="breadcrumbs">

                                                        

                                        </div>

                                        

                                                        <div class="left1 " id="nav" role="navigation">
                                                   <div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">RPi Projects</span></span></span></h3>
 <ul class="nav menu">
<li class="item-149"><a href="http://www.raspberryconnect.com/rpi-projects">RPi Projects</a></li><li class="item-187"><a href="http://www.raspberryconnect.com/in-the-classroom">Classroom Projects</a></li><li class="item-133"><a href="http://www.raspberryconnect.com/pi-base">Pi Base</a></li><li class="item-168"><a href="http://www.raspberryconnect.com/idonethat">I've Done That</a></li><li class="item-131"><a href="http://www.raspberryconnect.com/audio">Audio</a></li><li class="item-146"><a href="http://www.raspberryconnect.com/custom-casing">Custom Casing</a></li><li class="item-140"><a href="http://www.raspberryconnect.com/emulation">Emulation</a></li><li class="item-134"><a href="http://www.raspberryconnect.com/games">Games</a></li><li class="item-135"><a href="http://www.raspberryconnect.com/graphics">Graphics</a></li><li class="item-138 current active"><a href="http://www.raspberryconnect.com/network">Network</a></li><li class="item-145"><a href="http://www.raspberryconnect.com/hardware-add-ons">Hardware Add-ons</a></li><li class="item-136"><a href="http://www.raspberryconnect.com/internet">Internet</a></li><li class="item-137"><a href="http://www.raspberryconnect.com/multimedia">Multimedia</a></li><li class="item-139"><a href="http://www.raspberryconnect.com/programming">Programming</a></li><li class="item-141"><a href="http://www.raspberryconnect.com/office">Office</a></li><li class="item-142"><a href="http://www.raspberryconnect.com/operating-systems">Operating Systems</a></li><li class="item-143"><a href="http://www.raspberryconnect.com/security">Security</a></li><li class="item-144"><a href="http://www.raspberryconnect.com/tutorials-guides">Tutorials &amp; Guides</a></li><li class="item-132"><a href="http://www.raspberryconnect.com/video">Video</a></li><li class="item-147"><a href="http://www.raspberryconnect.com/miscellaneous">Miscellaneous</a></li></ul>
</div>
<div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">Advertising </span></span></span></h3>
 

<div class="custom">
	<div style="margin: 0 15px;">

<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Rasp Right Side Bar -->
<ins class="adsbygoogle" style="display:inline-block;width:120px;height:600px" data-ad-client="ca-pub-3533837445035277" data-ad-slot="5682824771" hidden="" kku7c7a=""></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div></div>
</div>
<div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">Advertising  (2)</span></span></span></h3>
 

<div class="custom">
	<div style="margin: 0 15px;">

<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Rasp Right Side Bar -->
<ins class="adsbygoogle" style="display:inline-block;width:120px;height:600px" data-ad-client="ca-pub-3533837445035277" data-ad-slot="5682824771" hidden="" kku7c7a=""></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div></div>
</div>

                                                                
                                                                


                                                        </div><!-- end navi -->
               
                                        <div id="wrapper">

                                                <div id="main" role="main">

                                                                                                        <div id="top">
<ul itemscope="" itemtype="https://schema.org/BreadcrumbList" class="breadcrumb">
			<li>
			You are here: &nbsp;
		</li>
	
				<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem">
									<a itemprop="item" href="http://www.raspberryconnect.com/network" class="pathway"><span itemprop="name">Network</span></a>
				
									<span class="divider">
						<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/arrow.png" alt="">					</span>
								<meta itemprop="position" content="1">
			</li>
					<li itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem" class="active">
				<span itemprop="name">
					Raspberry Pi - Auto WiFi Hotspot Switch Internet				</span>
				<meta itemprop="position" content="2">
			</li>
		</ul>

                                                        </div>
                                                
                                                        <div id="system-message-container">
	</div>

                                                        

<!-- Start K2 Item Layout -->
<span id="startOfPageId330"></span>

<div id="k2Container" class="itemView itemIsFeatured">

	<!-- Plugins: BeforeDisplay -->
	
	<!-- K2 Plugins: K2BeforeDisplay -->
	
	<div class="itemHeader">

				<!-- Date created -->
		<span class="itemDateCreated">
			Friday, 30 June 2017 21:17		</span>
		
	  	  <!-- Item title -->
	  <h2 class="itemTitle">
						
	  	Raspberry Pi - Auto WiFi Hotspot Switch Internet
	  	
	  </h2>
	  
				<!-- Item Author -->
		<span class="itemAuthor">
			Written by&nbsp;
						<a rel="author" href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme">roboberry</a>
					</span>
		
  </div>

  <!-- Plugins: AfterDisplayTitle -->
  
  <!-- K2 Plugins: K2AfterDisplayTitle -->
  
	  <div class="itemToolbar">
		<ul>
			
			
			
			
			
			
						<!-- Anchor link to comments below - if enabled -->
			<li>
														<a class="itemCommentsLink k2Anchor" href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#itemCommentsAnchor">
						<span>103</span> comments					</a>
												</li>
					</ul>
		<div class="clr"></div>
  </div>
	
	
  <div class="itemBody">

	  <!-- Plugins: BeforeDisplayContent -->
	  
	  <!-- K2 Plugins: K2BeforeDisplayContent -->
	  
	  	  <!-- Item Image -->
	  <div class="itemImageBlock">
		  <span class="itemImage">
		  	<a class="modal" rel="{handler: &#39;image&#39;}" href="http://www.raspberryconnect.com/media/k2/items/cache/2cd9d1d7bb30511eb4cd517c131ae148_XL.jpg" title="Click to preview image">
		  		<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/2cd9d1d7bb30511eb4cd517c131ae148_L.jpg" alt="Raspberry Pi - Auto WiFi Hotspot Switch Internet" style="width:200px; height:auto;">
		  	</a>
		  </span>

		  
		  
		  <div class="clr"></div>
	  </div>
	  
<!--Custom Extra Field Position-->

	 <div class="itemExtraFields">
	 	  <!-- Item extra fields -->
	  	<ul>
									<li>
				<span class="itemExtraFieldsLabel">Author Type:</span>
				<span class="itemExtraFieldsValue">Individual</span>
			</li>
									</ul>
	    <div class="clr"></div>
	  </div>


<!--End Custom Field Position-->

	  	  	  <!-- Item introtext -->
	  <div class="itemIntroText">
	  	<p>A script to allow the Raspberry Pi to connect to a know wifi router or automatically generate an Internet Hotspot Access Point if no network is found. You can then use SSH or VNC on the move and switch between the hotspot and network without a reboot.</p>	  </div>
	  	  	  <!-- Item fulltext -->
	  <div class="itemFullText">
	  	<p>&nbsp;</p>
<h4>Works with Raspbian Stretch and Raspbian Jessie.</h4>
<h4>Latest updates to setup - 15th May 2018 - hostapd.conf, dhcpcd.conf, autohotspotN</h4>
<p><br><span style="color: #ff0000;"></span></p>
<p>When i am home I like to have my Raspberry Pi connected to the home network and the internet but when I am out I would like to connect to it via a hotspot using a tablet, phone or laptop. Usually this means when you are out you can't use your Raspberry Pi. The alternative is set it up as an access point so you can connect to it while you are out but when you are home you have to connect it to you routers ethernet port to use it on your home network.</p>
<p>I wanted a Raspberry Pi that connects to my home networks Wifi when I am at home or generates a wifi Hotspot/Access Point when I am out.</p>
<p>I have done this in a previous script but, for my use, when it is in Hotspot mode it was not able to use the internet if you connect an ethernet cable. Which was fine for me but some users required this feature. So this article is how to setup a Raspberry Pi so it can automatically switch between a network wifi connection and an internet routed hotspot.</p>
<p>If you are using a Raspbery Pi Zero w that has no network port and don't need an internet routed Access Point then you can use the other Hotspot switch script <a href="http://www.raspberryconnect.com/network/item/331-raspberry-pi-auto-wifi-hotspot-switch-no-internet-routing" target="_self">Raspberry Pi - Auto WiFi Hotspot Switch - Direct Connection</a></p>
<p>If you would just like a permanent hotspot then you can use this guide <a href="http://www.raspberryconnect.com/network/item/333-raspberry-pi-hotspot-access-point-dhcpcd-method" target="_self">Raspberry Pi - Hotspot/Access Point dhcpcd method</a></p>
<h2>Aim:</h2>
<ul>
<li style="text-align: left;">When you're home: &nbsp; On starting the Raspberry Pi it connects to your home routers wifi</li>
<li style="text-align: left;">When you're out: On starting, if any known wifi connection is not found it will generate a hotspot so a direct wifi connection can be made to the Raspberry Pi by a tablet, phone or laptop.</li>
<li style="text-align: left;">While in Hotspot mode:&nbsp; if an ethernet cable is connected the Raspberry Pi, then it will have internet access along with any wifi device connected to the Hotspot.</li>
</ul>
<h3>Additional Features:</h3>
<p style="text-align: left;">Using a Cron, a timer can be setup so the wifi connection can be regulary checked. It will switch between a wifi router and a hotspot without a reboot depending on the results. This is useful for</p>
<ul>
<li style="text-align: left;">Raspberry Pi in car entertainment systems</li>
<li style="text-align: left;">Raspberry Pi Dash Cams</li>
<li style="text-align: left;">If the RPi looses wifi connection in your garden or near your home when using the camera or sensors.</li>
<li style="text-align: left;">You run a script or program at home connected to your router and wish to monitor it while you are out. As a hotspot is generated without a reboot the script/program is not interuppted.</li>
</ul>
<p>It is also possible to run the script from a GPIO button so you can manually run the script to switch depending on where you are.</p>
<p>&nbsp;</p>
<h2>&nbsp;Requirements:</h2>
<p>This has been tested on Raspbian Jessie and Raspbian Stretch. To see which version you have enter the command lsb_release -a</p>
<ul>
<li style="text-align: left;">Raspberry Pi 3, RPi 3 B+</li>
<li style="text-align: left;">Raspberry Pi 1,2 with a Wifi Dongle*,</li>
<li style="text-align: left;">Raspberry Pi Zero W and Zero with WiFi Dongle* (internet hotspot not useable as it has no ethernet port. I suggest you use the non internet version of the script <a href="http://www.raspberryconnect.com/network/item/331-raspberry-pi-auto-wifi-hotspot-switch-no-internet-routing" target="_blank" rel="noopener noreferrer">Raspberry Pi - Auto WiFi Hotspot Switch - Direct Connection</a></li>
<li style="text-align: left;">Wifi already configured for your home router</li>
</ul>
<p>*some WiFi dongles don't work in adhoc mode or don't work with with the nl80211 driver used in this guide for RPi 3, RPi 3B+ &amp; zero W inbuilt wifi, so you may want to check this first before starting.</p>
<p>This setup has been tested on Raspbian Jessie and Raspbian Stretch using a RPi3B+, RPi3RPI Zero W and a RPI 2 . A connection has been made to the Hotspot using an Android Tablet, Ipad2, Raspberry PI and Windows 10. All worked fine with SSH.</p>
<h2>Note: Existing Autohotspot users</h2>
<p>If you are currently are using one of my other autohotspot scripts and would like to change it to this setup please read all sections as there are changes to the dnsmasq.conf file, interfaces file, the service file and the autohotspot file.</p>
<h3 style="text-align: left;">Note:</h3>
<p>Dnsmasq bug: in versions below 2.77 there is a recent bug that may cause the hotspot not to start for some users. This can be resolved by removing the dns-root-data. It may be benificial to do this before you start the rest of the installation as it has been reported that doing it after installation for effected users does not work but you won't know if it is an issue until after the installation is complete.</p>
<p>check your version with : dpkg -s dnsmasq</p>
<p>versions 2.77 and above are ok. If not then try the command:</p>
<p><samp>sudo apt-get purge dns-root-data</samp></p>
<p>thanks to danny for highlighting this.</p>
<p>&nbsp;</p>
<h3>Note about Raspbian Stretch Network Device Names</h3>
<p>For Raspbian Stretch there has been changes to how the network drivers are named, called&nbsp;Predictable Network Interface Names,&nbsp; and may be different for the usual wlan0 and wlan1 for wifi and eth0 for ethernet connections. Though the official Foundation version of Raspbian Stretch seems to be keeping to the old standard names, at least at the time of writing,&nbsp; this may not always be the case. For this guide I will use wlan0 as the device that is used. &nbsp;</p>
<p>To check the device name for your setup enter the commmand iw dev and take a note of the "Interface" name. For wifi it should start with wl , replace your device name with any reference to wlan0 in the article, scripts and config files.</p>
<p>&nbsp;</p>
<h2>Step 1:</h2>
<p style="text-align: left;">To start with hostapd hotspot client and dnsmasq lightweight dns server need to be installed.</p>
<p style="text-align: left;">Open a Terminal session.</p>
<p style="text-align: left;">Update Raspbian with the latest updates by entering the commands:</p>
<p><samp style="text-align: left;"><code style="text-align: left;">sudo apt-get update<br></code></samp><samp style="text-align: left;"><code>sudo apt-get upgrade<br></code></samp></p>
<p style="text-align: left;">&nbsp;To install hostapd enter the command:</p>
<p><samp style="text-align: left;"><code>sudo apt-get install hostapd<br></code></samp></p>
<p style="text-align: left;">enter Y when prompted.</p>
<p style="text-align: left;">To install dnsmasq enter the command:</p>
<p><samp style="text-align: left;"><code>sudo apt-get install dnsmasq<br></code></samp></p>
<p style="text-align: left;">enter Y when prompted</p>
<p style="text-align: left;">The installers will have set up the programme so they run when the pi is started. For this setup they only need to be started if the home router is not found. So automatic startup needs to be disabled. This is done with the following commands:</p>
<p><samp style="text-align: left;"><code style="text-align: left;">sudo systemctl disable hostapd<br></code></samp><samp style="text-align: left;"><code style="text-align: left;">sudo systemctl disable dnsmasq</code></samp></p>
<p style="text-align: left;">Now the hostspot configuration file can be setup. This contains the name of the WiFi signal you will need to connect to (SSID) and the security password.</p>
<p style="text-align: left;"><em>To edit the configuration files I will be using the nano text editor but if you prefer an editor with an point and click interface then replace nano with leafpad in the following instructions.</em></p>
<h3 style="text-align: left;">Hostapd Configuration<em><br></em></h3>
<p style="text-align: left;">Using a text editor edit the hostapd configuration file. This file won't exist at this stage so will be blank. (Download <a href="http://www.raspberryconnect.com/images/autohotspotN/autohotspotn-95-4/hostapd.txt" target="_blank" rel="noopener noreferrer">here</a>)</p>
<p><samp><code style="text-align: left;">sudo nano /etc/hostapd/hostapd.conf</code></samp></p>
<pre><samp>
#2.4GHz setup wifi 80211 b,g,n
interface=wlan0
driver=nl80211
ssid=RPiHotspotN
hw_mode=g
channel=8
wmm_enabled=0
macaddr_acl=0
auth_algs=1
ignore_broadcast_ssid=0
wpa=2
wpa_passphrase=1234567890
wpa_key_mgmt=WPA-PSK
wpa_pairwise=CCMP TKIP
rsn_pairwise=CCMP

#80211n - Change GB to your WiFi country code
country_code=GB
ieee80211n=1
ieee80211d=1
 </samp></pre>
<ul>
<li style="text-align: left;">The interface will be wlan0</li>
<li style="text-align: left;">The driver nl80211 works with the Raspberry Pi 3B+, RPi 3 &amp; Zero W onboard WiFi but you will need to check that your wifi dongle is compatable and can use Access Point mode.</li>
</ul>
<p style="text-align: left;">For more information on wifi dongles see <a href="http://elinux.org/RPi_USB_Wi-Fi_Adapters" target="_blank" rel="noopener noreferrer">elinux.org/RPi_USB_Wi-Fi_Adapters</a></p>
<ul>
<li style="text-align: left;">The SSID is the name of the WiFi signal broadcast from the RPi, which you will connect to with your Tablet or phones WiFi settings.</li>
<li style="text-align: left;">Channel can be set between 1 and 13. If you are having trouble connection because of to many wifi signals in your area are using channel 8 then try another channel.</li>
<li style="text-align: left;">Wpa_passphrase is the password you will need to enter when you first connect a device to your Raspberry Pi's hotspot. This should be at least 8 characters and a bit more difficult to guess than my example.</li>
<li style="text-align: left;">The country_code should be set to your country to comply with local RF laws. You may experience connection issues if this is not correct. Your country_code can be found in /etc/wpa_supplicant/wpa_supplicant.conf or in Raspberry Pi Configuration - Localisation settings</li>
</ul>
<p style="text-align: left;">To save the config file press ctrl &amp; o and to exit nano press Ctrl &amp; x</p>
<p style="text-align: left;">Now the defaults file needs to be updated to point to where the config file is stored.<br>In terminal enter the command<br> <code>sudo nano /etc/default/hostapd</code></p>
<p style="text-align: left;">Change:<br>#DAEMON_CONF=""<br>to<br>DAEMON_CONF="/etc/hostapd/hostapd.conf"</p>
<p>Check the DAEMON_OPTS="" is preceded by a #, so is #DAEMON_OPTS=""</p>
<p style="text-align: left;">And save.</p>
<h3 style="text-align: left;">DNSmasq configuration</h3>
<p>Next dnsmasq needs to be configured to allow the Rpi to act as a router and issue ip addresses. Open the dnsmasq.conf file with</p>
<p><samp>sudo nano /etc/dnsmasq.conf</samp></p>
<p>Go to the bottom of the file and add the following lines (download <a href="http://www.raspberryconnect.com/images/autohotspotN/autohotspotn-95-4/dnsmasq.txt" target="_blank" rel="noopener noreferrer">here</a>)</p>
<pre><samp>
#AutoHotspot config
interface=wlan0
bind-dynamic 
server=8.8.8.8
domain-needed
bogus-priv
dhcp-range=192.168.50.150,192.168.50.200,255.255.255.0,12h
</samp></pre>
<p>and the save (ctl &amp; o) and exit (ctrl &amp; x)</p>
<h2>Step 2:</h2>
<p>Now that hostapd and dnsmasq are configured we now need to make some changes to the interfaces file, setup ip_forwarding, dhcpcd.conf and create a service. Once these are done we can then add the autohotspot script.</p>
<p>The interfaces file is not required and should be empty of any network config. Depending which version of Raspbian you have this file may still contain network config.</p>
<p>Enter</p>
<p>sudo nano /etc/network/interfaces</p>
<p>If your file shows more than the standard top 5 lines like this</p>
<pre><samp>
# interfaces(5) file used by ifup(8) and ifdown(8)
# Please note that this file is written to be used with dhcpcd
# For static IP, consult /etc/dhcpcd.conf and 'man dhcpcd.conf'
# Include files from /etc/network/interfaces.d:
source-directory /etc/network/interfaces.d
<br>
</samp></pre>
<p>then make a copy of of your file and then remove any excess lines from the interfaces file.</p>
<p>To make a backup of your interfaces file use the command</p>
<p><samp>sudo cp /etc/network/interfaces /etc/network/interfaces-backup</samp></p>
<h3>&nbsp;ip forwarding</h3>
<p>While the RPi is in hotspot mode ip forwarding needs to be on so the internet works when an ethernet cable is attached. The autohotspot script will switch ip forwarding on and off between network mode and hotspot mode but it needs to be on by default for the script to manage ip forwarding.</p>
<p>enter</p>
<p><samp>sudo nano /etc/sysctl.conf</samp></p>
<p>look for the line</p>
<p><samp># Uncomment the next line to enable packet forwarding for IPv4<br>#net.ipv4.ip_forward=1</samp></p>
<p>and remove the # so it is</p>
<p><samp># Uncomment the next line to enable packet forwarding for IPv4<br>net.ipv4.ip_forward=1</samp></p>
<p>now save (ctrl &amp; o) and exit (ctrl &amp; x)</p>
<h3>DHCPCD</h3>
<p>dhcpcd is the software that manages the network setup. The next step is to stop dhcpcd from starting the wifi network so the autohotspot script in the next step takes control of that. Ethernet will still be managed by dhcpcd.</p>
<p>Open dhcpcd.conf with the command</p>
<p><samp>sudo nano /etc/dhcpcd.conf</samp></p>
<p>at the bottom of the file enter the line</p>
<p><samp>nohook wpa_supplicant</samp></p>
<p>now save (ctrl &amp; o) and exit (ctrl &amp; x)</p>
<p>&nbsp;</p>
<h3>autohotspot service file</h3>
<p>Next we have to create a service which will run the autohotspot script when the Raspberry Pi starts up.</p>
<p>create a new file with the command</p>
<p><samp>sudo nano /etc/systemd/system/autohotspot.service</samp></p>
<p>Then enter the following text or download <a href="http://www.raspberryconnect.com/images/autohotspotN/autohotspotn-95-4/autohotspot-service.txt" target="_blank" rel="noopener noreferrer">here</a></p>
<pre><samp>
[Unit]
Description=Automatically generates an internet Hotspot when a valid ssid is not in range
After=multi-user.target
[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/bin/autohotspotN
[Install]
WantedBy=multi-user.target
</samp></pre>
<p>and save (ctrl &amp; o) and exit (ctrl &amp; x)</p>
<p>&nbsp;</p>
<p>For the service to work it has to be enabled. To do this enter the command</p>
<p><samp>sudo systemctl enable autohotspot.service</samp></p>
<p><strong>Software check:</strong></p>
<p>If your version of Raspbian has been repeatedly upgraded from an old OS image, it is possible that that you don't have the correct wifi tools install. These are installed by default on more recent versions of Raspbian.</p>
<p>to check you have iw installed enter the command</p>
<p>dpkg -s iw</p>
<p>If it is installed the first two lines that shown should be</p>
<p>Package: iw<br>Status: install ok installed</p>
<p>if not enter the command</p>
<p><samp>sudo apt-get install iw</samp></p>
<h2>AutoHotspot Script</h2>
<p>This is the main script that will manage your wifi connections between a wifi router and an Access Point.</p>
<p>It will search for any wifi connection that is setup on you Raspberry Pi by using the details found in /etc/wpa_supplicant/wpa_supplicant.conf</p>
<p>If no wifi signal is found for a known SSID then the script will shutdown the wifi network setup and create a Hotspot. If an ethernet cable that allows internet access is connect then the Hotspot will become a full internet access point. Allowing all connected devices to use the Internet. Without an ethernet connect the Raspberry Pi can be accessed from a wifi device using SSH or VNC.</p>
<p>&nbsp;The script works with SSID's that contain spaces and by entering your routers MAC address it can be used with hidden SSID's.</p>
<h3>Hidden SSIDs</h3>
<p>If you routers SSID is not broadcast/hidden then find this section in the script</p>
<p><samp>#Enter the Routers Mac Addresses for hidden SSIDs, seperated by spaces ie <br>#( '11:22:33:44:55:66' 'aa:bb:cc:dd:ee:ff' ) <br>mac=()</samp></p>
<p>and enter you routers MAC address in the brackets of mac=() as shown in the example. Make sure mutiple MAC addresses are seperated by a space.</p>
<p>&nbsp;</p>
<h3>&nbsp;Creating the autohotspot script:</h3>
<p>Create a new file with the command</p>
<p>sudo nano /usr/bin/autohotspotN</p>
<p>and add the autohotspot script. This can be downloaded from <a href="http://www.raspberryconnect.com/images/autohotspotN/autohotspotn-95-4/autohotspotN.txt" target="_blank" rel="noopener noreferrer">here</a></p>
<p>If you are using the linux firewall, firewalld then the ip tables in the script will cause issue but the required modifications are later in this guide.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre><samp>
#!/bin/bash
#version 0.95-4-N/HS-I

#You may share this script on the condition a reference to RaspberryConnect.com 
#must be included in copies or derivatives of this script. 

#Network Wifi &amp; Hotspot with Internet
#A script to switch between a wifi network and an Internet routed Hotspot
#A Raspberry Pi with a network port required for Internet in hotspot mode.
#Works at startup or with a seperate timer or manually without a reboot
#Other setup required find out more at
#http://www.raspberryconnect.com

wifidev="wlan0" #device name to use. Default is wlan0.
ethdev="eth0" #Ethernet port to use with IP tables
#use the command: iw dev ,to see wifi interface name 

IFSdef=$IFS
cnt=0
#These four lines capture the wifi networks the RPi is setup to use
wpassid=$(awk '/ssid="/{ print $0 }' /etc/wpa_supplicant/wpa_supplicant.conf | awk -F'ssid=' '{ print $2 }' ORS=',' | sed 's/\"/''/g' | sed 's/,$//')
IFS=","
ssids=($wpassid)
IFS=$IFSdef #reset back to defaults


#Note:If you only want to check for certain SSIDs
#Remove the # in in front of ssids=('mySSID1'.... below and put a # infront of all four lines above
# separated by a space, eg ('mySSID1' 'mySSID2')
#ssids=('mySSID1' 'mySSID2' 'mySSID3')

#Enter the Routers Mac Addresses for hidden SSIDs, seperated by spaces ie 
#( '11:22:33:44:55:66' 'aa:bb:cc:dd:ee:ff' ) 
mac=()

ssidsmac=("${ssids[@]}" "${mac[@]}") #combines ssid and MAC for checking

createAdHocNetwork()
{
    echo "Creating Hotspot"
    ip link set dev "$wifidev" down
    ip a add 192.168.50.5/24 brd + dev "$wifidev"
    ip link set dev "$wifidev" up
    dhcpcd -k "$wifidev" &gt;/dev/null 2&gt;&amp;1
    iptables -t nat -A POSTROUTING -o "$ethdev" -j MASQUERADE
    iptables -A FORWARD -i "$ethdev" -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT
    iptables -A FORWARD -i "$wifidev" -o "$ethdev" -j ACCEPT
    systemctl start dnsmasq
    systemctl start hostapd
    echo 1 &gt; /proc/sys/net/ipv4/ip_forward
}

KillHotspot()
{
    echo "Shutting Down Hotspot"
    ip link set dev "$wifidev" down
    systemctl stop hostapd
    systemctl stop dnsmasq
    iptables -D FORWARD -i "$ethdev" -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT
    iptables -D FORWARD -i "$wifidev" -o "$ethdev" -j ACCEPT
    echo 0 &gt; /proc/sys/net/ipv4/ip_forward
    ip addr flush dev "$wifidev"
    ip link set dev "$wifidev" up
    dhcpcd  -n "$wifidev" &gt;/dev/null 2&gt;&amp;1
}

ChkWifiUp()
{
	echo "Checking WiFi connection ok"
        sleep 20 #give time for connection to be completed to router
	if ! wpa_cli -i "$wifidev" status | grep 'ip_address' &gt;/dev/null 2&gt;&amp;1
        then #Failed to connect to wifi (check your wifi settings, password etc)
	       echo 'Wifi failed to connect, falling back to Hotspot.'
               wpa_cli terminate "$wifidev" &gt;/dev/null 2&gt;&amp;1
	       createAdHocNetwork
	fi
}


FindSSID()
{
#Check to see what SSID's and MAC addresses are in range
ssidChk=('NoSSid')
i=0; j=0
until [ $i -eq 1 ] #wait for wifi if busy, usb wifi is slower.
do
        ssidreply=$((iw dev "$wifidev" scan ap-force | egrep "^BSS|SSID:") 2&gt;&amp;1) &gt;/dev/null 2&gt;&amp;1 
        echo "SSid's in range: " $ssidreply
        echo "Device Available Check try " $j
        if (($j &gt;= 10)); then #if busy 10 times goto hotspot
                 echo "Device busy or unavailable 10 times, going to Hotspot"
                 ssidreply=""
                 i=1
	elif echo "$ssidreply" | grep "No such device (-19)" &gt;/dev/null 2&gt;&amp;1; then
                echo "No Device Reported, try " $j
		NoDevice
        elif echo "$ssidreply" | grep "Network is down (-100)" &gt;/dev/null 2&gt;&amp;1 ; then
                echo "Network Not available, trying again" $j
                j=$((j + 1))
                sleep 2
	elif echo "$ssidreplay" | grep "Read-only file system (-30)" &gt;/dev/null 2&gt;&amp;1 ; then
		echo "Temporary Read only file system, trying again"
		j=$((j + 1))
		sleep 2
	elif ! echo "$ssidreply" | grep "resource busy (-16)"  &gt;/dev/null 2&gt;&amp;1 ; then
               echo "Device Available, checking SSid Results"
		i=1
	else #see if device not busy in 2 seconds
                echo "Device unavailable checking again, try " $j
		j=$((j + 1))
		sleep 2
	fi
done

for ssid in "${ssidsmac[@]}"
do
     if (echo "$ssidreply" | grep "$ssid") &gt;/dev/null 2&gt;&amp;1
     then
	      #Valid SSid found, passing to script
              echo "Valid SSID Detected, assesing Wifi status"
              ssidChk=$ssid
              return 0
      else
	      #No Network found, NoSSid issued"
              echo "No SSid found, assessing WiFi status"
              ssidChk='NoSSid'
     fi
done
}

NoDevice()
{
	#if no wifi device,ie usb wifi removed, activate wifi so when it is
	#reconnected wifi to a router will be available
	echo "No wifi device connected"
	wpa_supplicant -B -i "$wifidev" -c /etc/wpa_supplicant/wpa_supplicant.conf &gt;/dev/null 2&gt;&amp;1
	exit 1
}

FindSSID

#Create Hotspot or connect to valid wifi networks
if [ "$ssidChk" != "NoSSid" ] 
then
       echo 0 &gt; /proc/sys/net/ipv4/ip_forward #deactivate ip forwarding
       if systemctl status hostapd | grep "(running)" &gt;/dev/null 2&gt;&amp;1
       then #hotspot running and ssid in range
              KillHotspot
              echo "Hotspot Deactivated, Bringing Wifi Up"
              wpa_supplicant -B -i "$wifidev" -c /etc/wpa_supplicant/wpa_supplicant.conf &gt;/dev/null 2&gt;&amp;1
              ChkWifiUp
       elif { wpa_cli -i "$wifidev" status | grep 'ip_address'; } &gt;/dev/null 2&gt;&amp;1
       then #Already connected
              echo "Wifi already connected to a network"
       else #ssid exists and no hotspot running connect to wifi network
              echo "Connecting to the WiFi Network"
              wpa_supplicant -B -i "$wifidev" -c /etc/wpa_supplicant/wpa_supplicant.conf &gt;/dev/null 2&gt;&amp;1
              ChkWifiUp
       fi
else #ssid or MAC address not in range
       if systemctl status hostapd | grep "(running)" &gt;/dev/null 2&gt;&amp;1
       then
              echo "Hostspot already active"
       elif { wpa_cli status | grep "$wifidev"; } &gt;/dev/null 2&gt;&amp;1
       then
              echo "Cleaning wifi files and Activating Hotspot"
              wpa_cli terminate &gt;/dev/null 2&gt;&amp;1
              ip addr flush "$wifidev"
              ip link set dev "$wifidev" down
              rm -r /var/run/wpa_supplicant &gt;/dev/null 2&gt;&amp;1
              createAdHocNetwork
       else #"No SSID, activating Hotspot"
              createAdHocNetwork
       fi
fi
</samp></pre>
<p>and save (ctl &amp; o) and exit (ctl &amp; x)</p>
<p>&nbsp;</p>
<p>For the autohotspotN script to work it needs to be executable. This is done with the command</p>
<p><samp>sudo chmod +x /usr/bin/autohotspotN</samp></p>
<p>Thats it, you are ready to go. Now test that everything is working ok.</p>
<p>Thanks to Willem Me and Tino for there contributions to the development of this script.</p>
<h3><strong>Firewalld:&nbsp;</strong></h3>
<p><strong></strong>if you are using the firewall firewalld then you will need to replace the hotspot activation and deactivation functions so it works ok with the firewall.&nbsp; In the autohotspotN script locate the createAdHocNetwork() section and the KillHotspot() funtion and replace it with this code</p>
<pre><code>
createAdHocNetwork()
{
    ip link set dev "$wifidev" down
    ip a add 192.168.50.5/24 brd + dev "$wifidev"
    ip link set dev "$wifidev" up
    dhcpcd -k "$wifidev" &gt;/dev/null 2&gt;&amp;1
    firewall-cmd --direct -add-rule ipv4 nat POSTROUTING 0 -o eth0 -j MASQUERADE
    firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i eth0 -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT
    firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i "$wifidev" -o eth0 -j ACCEPT
    systemctl start dnsmasq
    systemctl start hostapd
    echo 1 &gt; /proc/sys/net/ipv4/ip_forward
}

KillHotspot()
{
    echo "Shutting Down Hotspot"
    ip link set dev "$wifidev" down
    systemctl stop hostapd
    systemctl stop dnsmasq
    firewall-cmd --direct --remove-rule ipv4 nat POSTROUTING 0 -o eth0 -j MASQUERADE
    firewall-cmd --direct --remove-rule ipv4 filter FORWARD 0 -i eth0 -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT
    firewall-cmd --direct --remove-rule ipv4 filter FORWARD 0 -i "$wifidev" -o eth0 -j ACCEPT
    echo 0 &gt; /proc/sys/net/ipv4/ip_forward
    ip addr flush dev "$wifidev"
    ip link set dev "$wifidev" up
    dhcpcd  -n "$wifidev" &gt;/dev/null 2&gt;&amp;1
}
</code></pre>
<p>&nbsp;Thank you to <span class="commentAuthorName"> Z-WolF</span> for supplying this update.</p>
<h2>Testing the Hotspot</h2>
<p>To test that the RPi is setup ok reboot the RPI. When the desktop returns you should have the wifi icon <img style="margin: 2px;" alt="Raspbian Pixel WiFI icon" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/wif.gif" width="43" height="39"> by the clock.<br>For those setting this up on a headerless RPi then you should see the pi on your routers network.&nbsp;</p>
<p>To test the hotspot works ok edit the ssid name of your router in the wpa_supplicant file.</p>
<p>enter</p>
<p><samp>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</samp></p>
<p>and add 'off' to the end of your routers ssid. For example:</p>
<pre><samp>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>update_config=1<br>country=GB<br>
network={
	ssid="mySSID1"
	psk="myPassword"
	key_mgmt=WPA-PSK
}
</samp></pre>
<p>change to</p>
<pre><samp>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>update_config=1<br>country=GB<br>
network={
	ssid="mySSID1off"
	psk="myPassword"
	key_mgmt=WPA-PSK
}
</samp></pre>
<p>save (ctrl &amp; o) and close (ctrl &amp; x) the file</p>
<p>Now reboot the Raspberry Pi.</p>
<p>Once the RPi is up and running the wifi icon near the clock should now be a red cross <img style="margin: 2px;" alt="Raspbian Pixel AP mode icon" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/networkdown.gif" width="42" height="37"> This means it is an access point, it could also mean your network is down but other devices should detect the hotspot. On a Tablet, phone or Laptop scan for wifi signals. You should see one for RPiHotN.</p>
<p>Select this as the wifi signal to connect to. The password is what you setup in the hostapd.conf file. From my example it is 1234567890</p>
<p><img style="margin: 2px;" alt="android wifi in range list" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/android-wifi.jpg" width="399" height="263"></p>
<p><em>Local wifi signals in range on Android</em></p>
<p>For SSH and VNC the connection ip is 192.168.50.5 also if you have setup the Rpi as a webserver use the same ip to see the webpage.</p>
<p>For ssh use ssh <span id="cloak52312"><a href="mailto:pi@192.168.50">pi@192.168.50</a></span><script type="text/javascript">
 //<!--
 document.getElementById('cloak52312').innerHTML = '';
 var prefix = '&#109;a' + 'i&#108;' + '&#116;o';
 var path = 'hr' + 'ef' + '=';
 var addy52312 = 'p&#105;' + '&#64;';
 addy52312 = addy52312 + '192' + '&#46;' + '168' + '&#46;' + '50';
 var addy_text52312 = 'p&#105;' + '&#64;' + '192' + '&#46;' + '168' + '&#46;' + '50';
 document.getElementById('cloak52312').innerHTML += '<a ' + path + '\'' + prefix + ':' + addy52312 + '\'>'+addy_text52312+'<\/a>';
 //-->
 </script>.5</p>
<p>For vnc use 192.168.50.5::5900</p>
<p>If you now connect an ethernet cable to the Raspbery Pi and your router and wait a few seconds the hotspot will allow connected wifi devices to use the internet as well as the RPi.</p>
<p>&nbsp;Once you are happy the setup is working ok change the wpa_supplicant.conf file back to your routers ssid. From the next reboot the autohotspotN script will manage your wifi connection.</p>
<p>&nbsp;		</p><div class="moduletable">
						

<div class="custom">
	<div style="float:right; width: 300px; margin:5px; padding:3px; border:solid; border-width:1px; color:green">
<p> <strong>If you find this guide useful</strong> and wish to show your appreciation then you are welcome to make a donation or share a link to this article. There is no obligation to do so, this guide is free for use and support is available to everybody as long as I know the answer :) 
</p><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="T3BLPMGBDNU76">
<input type="image" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/btn_donate_SM.gif" border="0" name="submit" alt="PayPal  The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_GB/i/scr/pixel.gif" width="1" height="1" hidden="" style="display: none !important;">
</form>RaspberryConnect.com
<p></p>
</div></div>
		</div>
	<p></p>
<h2>Setting up a Timer</h2>
<p>If the autohotspotN script is set to be run at set intervals, when you go out of range of your home router it will automatically generate a hotspot and then when you get back in range it will deactivate the hotspot and connect to the routers wifi. If you run a program in the background or use programs like tmux then any software you are running will keep working.</p>
<p>If you have an active ssh or vnc session running when the switch happens it will be lost.</p>
<p style="text-align: left;">Using a Cron job, tasks can be set off automatically at certain times, dates or intervals. For my use running the script every 5 minutes is fine but this can be changed to your needs. To setup a cron task enter the command</p>
<p><samp>crontab -e</samp></p>
<p style="text-align: left;">At the bottom of the file enter the command</p>
<p style="text-align: left;">*/5 * * * * sudo /usr/bin/autohotspotN &gt;/dev/null 2&gt;&amp;1</p>
<p style="text-align: left;">There is a space after each entry and * except the first *.</p>
<p style="text-align: left;">The first * position is for minutes. If you want it to check every minute just use * instead of */5</p>
<p style="text-align: left;">If you want to use hours, say every 2 hours enter it as</p>
<p style="text-align: left;">* */2 * * * sudo /usr/bin/autohotspotN &gt;/dev/null 2&gt;&amp;1</p>
<p style="text-align: left;">&nbsp;Save the cron tab with ctrl &amp; o and close it with ctrl &amp; x</p>
<p style="text-align: left;">The cron job will automatically start straight away.</p>
<h4 style="text-align: left;">Note on Permissions:</h4>
<p style="text-align: left;">by default the pi user does not need to enter a password to use the sudo command. If you are not using the default pi user and while doing this guide you have had to enter a password every time sudo is needed then you will find the the cron job will not work as it wont have permission to run the autohotspotN script.</p>
<p style="text-align: left;">To fix this you can give the user permission to run the script without a password.<br>Enter the command</p>
<p><samp>sudo visudo</samp></p>
<p style="text-align: left;">enter your password<br>at the bottom of the file add the following line, where username is the user that will be using the script:</p>
<p><samp>username ALL= NOPASSWD: /usr/bin/autohotspotN</samp></p>
<p style="text-align: left;">Now you will be able to run the script with sudo with the cron.</p>
<p style="text-align: left;">Thanks to Jim for pointing this out as an issue for some users.</p>
<h3 style="text-align: left;">Disable Cron Timer</h3>
<p style="text-align: left;">If you no longer need the timer running edit the cron with</p>
<p style="text-align: left;"><samp>crontab -e</samp></p>
<p style="text-align: left;">and put a # infront so it is now</p>
<p style="text-align: left;">#*/5 * * * * sudo /usr/bin/autohotspot</p>
<p style="text-align: left;">The script will now only work at boot up or if you manually run the autohotspotN script with the command</p>
<p style="text-align: left;"><samp>sudo /usr/bin/autohotspotN</samp></p>
<h3 style="text-align: left;">&nbsp;</h3>
<h2>Script Removal</h2>
<p>If you don't wish to continue using the autohotspotN script then the Raspberry Pi can be revered back to a standard wifi setup with the following steps.</p>
<p style="text-align: left;">Disable the script with the command</p>
<p><samp style="text-align: left;">sudo systemctl disable autohotspot</samp><samp style="text-align: left;"></samp></p>
<p>Then disable ip forwarding</p>
<p><samp>sudo nano /etc/sysctl.conf</samp></p>
<p>look for the entry</p>
<p><samp># Uncomment the next line to enable packet forwarding for IPv4<br>net.ipv4.ip_forward=1</samp></p>
<p>and add a # as follows</p>
<p><samp># Uncomment the next line to enable packet forwarding for IPv4<br># net.ipv4.ip_forward=1</samp></p>
<p>In the /etc/dhcpcd.conf file remove the line that was added</p>
<p><samp>nohook wpa_supplicant</samp></p>
<p>If you had previous config in your /etc/network/interfaces file and made a backup you can restore your original interfaces file with the command</p>
<p><samp>sudo mv /etc/network/interfaces-backup /etc/network/interfaces</samp></p>
<p>Then reboot</p>
<p>The autohotspotN script will no longer have control of you wifi. Dnsmasq and hostapd can be uninstalled if you no longer need them.</p>
<h3>&nbsp;Trouble Shooting</h3>
<ul>
<li style="text-align: left;">If you get no wifi connection or no hotspot then it is most likley the autohotspotN script is not executable or the service has not been enabled</li>
</ul>
<p>redo the follow commands</p>
<p><samp>sudo chmod +x /usr/bin/autohotspotN</samp></p>
<p>&nbsp;</p>
<p><samp>sudo systemctl enable autohotspot.service</samp></p>
<p>&nbsp;</p>
<ul>
<li style="text-align: left;">You are in range of your router but it only creates a hotspot. If there is an issue with connecting to the router, such as the password is wrong. The script will fall back to the hotspot so you still have some type of connection. Check your password in the wpa_supplicant.conf file.&nbsp;</li>
<li style="text-align: left;">You can connect to the hotspot via an Android Phone but you can't get a ssh connection. Some users have found this issue where Android uses there data connection rather than the wifi. Disabeling data has allowed them to use ssh. &nbsp;&nbsp;</li>
<li style="text-align: left;">If this setup is not working as expected you can check the script for errors by running it manually in a terminal window with the command, sudo /usr/bin/autohotspotN ,you can also check the service status with, sudo systemctl status -l autohotspot ,and if the hotspot has failed try, sudo systemctl status -l hostapd</li>
<li style="text-align: left;">You need to add a new wifi network to the RPi but it is in Hotspot mode so you are unable to scan for new wifi signals. You will need to add the new network to /etc/wpa_supplicant/wpa_supplicant manually. Enter the following details replacing mySSID and myPassword with the correct details. If your router has a hidden SSID/not Broadcast then include the line;&nbsp; scan_ssid=1</li>
</ul>
<pre>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>update_config=1<br>country=GB<br><br>network={
	ssid="mySSID1"
	psk="myPassword"
	key_mgmt=WPA-PSK
}<br><br></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>	  </div>
	  	  
		<div class="clr"></div>
<!--  Custom Fields default block off
	     -->
	  <!-- Item extra fields -->
<!--        <div class="itemExtraFields">
	  	<h3>Additional Info</h3>
	  	<ul>
									<li class="even typeRadio group1">
				<span class="itemExtraFieldsLabel">Author Type:</span>
				<span class="itemExtraFieldsValue">Individual</span>
			</li>
									</ul>
	    <div class="clr"></div>
	  </div>
	  -->

				<div class="itemContentFooter">

			
						<!-- Item date modified -->
			<span class="itemDateModified">
				Last modified on Friday, 18 May 2018 20:46			</span>
			
			<div class="clr"></div>
		</div>
		
<!-- Google 728 x 90 banner add at base of Article -->

<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- RC Article Base -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-3533837445035277" data-ad-slot="4755549971" hidden="" kku7c7a=""></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


<!-- end of Google Banner-->


	  <!-- Plugins: AfterDisplayContent -->
	  
	  <!-- K2 Plugins: K2AfterDisplayContent -->
	  
	  <div class="clr"></div>
  </div>

		<!-- Social sharing -->
	<div class="itemSocialSharing">Google

				<!-- Twitter Button -->
		<div class="itemTwitterButton">
			<iframe id="twitter-widget-1" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" title="Twitter Tweet Button" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/tweet_button.b813cd3227574096a07e094b73331535.en-gb.html" style="position: static; visibility: visible; width: 60px; height: 20px;"></iframe><script type="text/javascript" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/widgets.js"></script>
		</div>
				
				<!-- Facebook Button -->
		<div class="itemFacebookButton">
			<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/EIL5DcDc3Zh.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/EIL5DcDc3Zh(1).html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f3b7bf805abdf8" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/ping.html" style="display: none;"></iframe></div></div></div>
			<script type="text/javascript">
				(function(d, s, id) {
				  var js, fjs = d.getElementsByTagName(s)[0];
				  if (d.getElementById(id)) {return;}
				  js = d.createElement(s); js.id = id;
				  js.src = "//connect.facebook.net/en_US/all.js#appId=177111755694317&xfbml=1";
				  fjs.parentNode.insertBefore(js, fjs);
				}(document, 'script', 'facebook-jssdk'));
			</script>
			<div class="fb-like fb_iframe_widget" data-send="false" data-width="200" data-show-faces="true" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=177111755694317&amp;container_width=200&amp;href=http%3A%2F%2Fwww.raspberryconnect.com%2Fnetwork%2Fitem%2F330-raspberry-pi-auto-wifi-hotspot-switch-internet&amp;locale=en_US&amp;sdk=joey&amp;send=false&amp;show_faces=true&amp;width=200"><span style="vertical-align: bottom; width: 225px; height: 28px;"><iframe name="f33b57a9edb384" width="200px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" title="fb:like Facebook Social Plugin" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/like.html" style="border: none; visibility: visible; width: 225px; height: 28px;" class=""></iframe></span></div>
		</div>
		
				<!-- Google +1 Button -->
		<div class="itemGooglePlusOneButton">	
			<div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 38px; height: 24px;"><iframe ng-non-bindable="" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 38px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 24px;" tabindex="0" vspace="0" width="100%" id="I0_1528114413930" name="I0_1528114413930" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/fastbutton.html" data-gapiattached="true" title="G+"></iframe></div>
			<script type="text/javascript">
			  (function() {
			  	window.___gcfg = {lang: 'en'}; // Define button default language here
			    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
			    po.src = 'https://apis.google.com/js/plusone.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
			  })();
			</script>
		</div>
				
		<div class="clr"></div>
	</div>
	
    <div class="itemLinks">

				<!-- Item category -->
		<div class="itemCategory">
			<span>Published in</span>
			<a href="http://www.raspberryconnect.com/network">Network</a>
		</div>
		
	  	  <!-- Item tags -->
	  <div class="itemTagsBlock">
		  <span>Tagged under</span>
		  <ul class="itemTags">
		    		    <li><a href="http://www.raspberryconnect.com/network/itemlist/tag/access%20point">access point</a></li>
		    		    <li><a href="http://www.raspberryconnect.com/network/itemlist/tag/hotspot">hotspot</a></li>
		    		    <li><a href="http://www.raspberryconnect.com/network/itemlist/tag/hostapd">hostapd</a></li>
		    		    <li><a href="http://www.raspberryconnect.com/network/itemlist/tag/dnsmasq">dnsmasq</a></li>
		    		    <li><a href="http://www.raspberryconnect.com/network/itemlist/tag/autohotspot">autohotspot</a></li>
		    		    <li><a href="http://www.raspberryconnect.com/network/itemlist/tag/wifi%20hotspot%20switch">wifi hotspot switch</a></li>
		    		  </ul>
		  <div class="clr"></div>
	  </div>
	  
	  
		<div class="clr"></div>
  </div>
  
    <!-- Author Block -->
  <div class="itemAuthorBlock">

  	  	<img class="itemAuthorAvatar" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="roboberry">
  	
    <div class="itemAuthorDetails">
      <h3 class="itemAuthorName">
      	<a rel="author" href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme">roboberry</a>
      </h3>

            <p></p><p>RapberryConnect.com SuperUser.&nbsp; Contactable via the site admin e-mail in the Contact Us link.</p><p></p>
      
            <span class="itemAuthorUrl">Website: <a rel="me" href="http://www.raspberryconnect.com/" target="_blank">www.raspberryconnect.com</a></span>
      
      

			<div class="clr"></div>

			<!-- K2 Plugins: K2UserDisplay -->
			
    </div>
    <div class="clr"></div>
  </div>
  
    <!-- Latest items from author -->
	<div class="itemAuthorLatest">
		<h3>Latest from roboberry</h3>
		<ul>
						<li class="even">
				<a href="http://www.raspberryconnect.com/network/item/333-raspberry-pi-hotspot-access-point-dhcpcd-method">Raspberry Pi - Hotspot/Access Point dhcpcd method</a>
			</li>
						<li class="odd">
				<a href="http://www.raspberryconnect.com/network/item/331-raspberry-pi-auto-wifi-hotspot-switch-direct-connection">Raspberry Pi - Auto WiFi Hotspot Switch - Direct Connection</a>
			</li>
						<li class="even">
				<a href="http://www.raspberryconnect.com/pi-base/item/328-google-aiy-voice-hat-customise-voice-commands">Google AIY Voice HAT Customise Voice Commands</a>
			</li>
					</ul>
		<div class="clr"></div>
	</div>
	
			
    <!-- Related items by tag -->
	<div class="itemRelated">
		<h3>Related items</h3>
		<ul>
						<li class="even">
			
								<a class="itemRelTitle" href="http://www.raspberryconnect.com/network/item/333-raspberry-pi-hotspot-access-point-dhcpcd-method">Raspberry Pi - Hotspot/Access Point dhcpcd method</a>
				
								
								
								
								
				
								
							</li>
						<li class="odd">
			
								<a class="itemRelTitle" href="http://www.raspberryconnect.com/network/item/331-raspberry-pi-auto-wifi-hotspot-switch-direct-connection">Raspberry Pi - Auto WiFi Hotspot Switch - Direct Connection</a>
				
								
								
								
								
				
								
							</li>
						<li class="even">
			
								<a class="itemRelTitle" href="http://www.raspberryconnect.com/network/item/327-raspberry-pi-auto-wifi-hotspot-switch">Raspberry Pi - Auto WiFi Hotspot Switch</a>
				
								
								
								
								
				
								
							</li>
						<li class="odd">
			
								<a class="itemRelTitle" href="http://www.raspberryconnect.com/network/item/320-rpi3-auto-wifi-hotspot-if-no-internet-oldscript">Raspberry PI 3 Auto WiFi Hotspot if no Internet - OldScript</a>
				
								
								
								
								
				
								
							</li>
						<li class="even">
			
								<a class="itemRelTitle" href="http://www.raspberryconnect.com/network/item/315-raspberry-pi-3-auto-wifi-hotspot-if-no-internet">Raspberry PI 3 Auto WiFi Hotspot if no Internet</a>
				
								
								
								
								
				
								
							</li>
						<li class="clr"></li>
		</ul>
		<div class="clr"></div>
	</div>
	
	<div class="clr"></div>

  
  
    <!-- Item navigation -->
  <div class="itemNavigation">
  	<span class="itemNavigationTitle">More in this category:</span>

				<a class="itemPrevious" href="http://www.raspberryconnect.com/network/item/327-raspberry-pi-auto-wifi-hotspot-switch">
			 Raspberry Pi - Auto WiFi Hotspot Switch		</a>
		
		
  </div>
  
  <!-- Plugins: AfterDisplay -->
  
  <!-- K2 Plugins: K2AfterDisplay -->
  
    <!-- K2 Plugins: K2CommentsBlock -->
    
   <!-- Item comments -->
  <a name="itemCommentsAnchor" id="itemCommentsAnchor"></a>

  <div class="itemComments">

	  	  <!-- Item comments form -->
	  <div class="itemCommentsForm">
	  	
<h3>Leave a comment</h3>
<p class="itemCommentsFormNotes">
		Comments for Guest and account owners. Account owners will need to login to use registered e-mail address. 	</p>

<form action="http://www.raspberryconnect.com/index.php" method="post" id="comment-form" class="form-validate">
	<label class="formComment" for="commentText">Message *</label>
	<textarea rows="20" cols="10" class="inputbox" onblur="if(this.value==&#39;&#39;) this.value=&#39;enter your message here...&#39;;" onfocus="if(this.value==&#39;enter your message here...&#39;) this.value=&#39;&#39;;" name="commentText" id="commentText">enter your message here...</textarea>

	<label class="formName" for="userName">Name *</label>
	<input class="inputbox" type="text" name="userName" id="userName" value="enter your name..." onblur="if(this.value==&#39;&#39;) this.value=&#39;enter your name...&#39;;" onfocus="if(this.value==&#39;enter your name...&#39;) this.value=&#39;&#39;;">

	<label class="formEmail" for="commentEmail">Email *</label>
	<input class="inputbox" type="text" name="commentEmail" id="commentEmail" value="enter your e-mail address..." onblur="if(this.value==&#39;&#39;) this.value=&#39;enter your e-mail address...&#39;;" onfocus="if(this.value==&#39;enter your e-mail address...&#39;) this.value=&#39;&#39;;">


		<label class="formRecaptcha">Enter the words you see below</label>
	<div id="recaptcha"><div style="width: 304px; height: 78px;"><div><iframe src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/anchor.html" width="304" height="78" role="presentation" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe></div><textarea id="g-recaptcha-response" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid #c1c1c1; margin: 10px 25px; padding: 0px; resize: none;  display: none; "></textarea></div></div>
	
	<input type="submit" class="button" id="submitCommentButton" value="Submit comment">

	<span id="formLog"></span>

	<input type="hidden" name="option" value="com_k2">
	<input type="hidden" name="view" value="item">
	<input type="hidden" name="task" value="comment">
	<input type="hidden" name="itemID" value="330">
	<input type="hidden" name="a81f743928e07ff00b6b554bede1e71a" value="1"></form>
	  </div>
	  
	  	  <!-- Item user comments -->
	  <h3 class="itemCommentsCounter">
	  	<span>103</span> comments	  </h3>

	  <ul class="itemCommentsList">
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4921" name="comment4921" id="comment4921">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 30 May 2018 09:37		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Rosario, Thank you for the Donation it is very much appreciated.<br>
I don't use a firewall myself with the script but the guide does have the separate modifications to the ip tables if you use the firewalld Linux firewall, in the Firewalled section just above Testing the hotspot.<br>
If you are not using that or not able to used Firewalled then let me know what one you are using and I will see what adaptions it needs. <br>
<br>
Regarding the Change Log; I was considering that as there were a few tweaks this time. Adding a text file to a change log would probably be a good option.<br>
<br>
Recent changes are: dealing with some more network error messages that may happen. The changes to DHCPCD.conf now give control to autohotspot script as some setups needed it, so it is safer to make it the default setup.<br>
Hostapd now uses 80211N, I will probably include a 5ghz option for PI3B+ soon. I have given the script longer to check if the network is connected before it decides it has failed and goes to a hotspot. <br>
I will put a more detailed log up. Thanks</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4921">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4921">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4915" name="comment4915" id="comment4915">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Rosario" width="48">
				
				<span class="commentDate">
		    	Tuesday, 29 May 2018 23:00		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Rosario			    		    </span>

		    <p>Hi :)<br>
<br>
Just forgot to say, that it could be wonderful if you could show on the page, what has been update/changed. A sort of change log.<br>
<br>
Even a link list of all old articles with the different old version, could be helpful to understand what has changed.<br>
<br>
Thanks! :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4915">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4915">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4914" name="comment4914" id="comment4914">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Rosario" width="48">
				
				<span class="commentDate">
		    	Tuesday, 29 May 2018 22:57		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Rosario			    		    </span>

		    <p>Hi :)<br>
<br>
Thank you so much for this tutorial and the scripts. They work wonderful with my Pi Zero/W.<br>
<br>
I've just made a donation to you. Thank You Again!<br>
<br>
There are some problem every time I set the firewall on. It won't works.<br>
<br>
Is there a rule to put inside the iptable to allow the script work correctly?<br>
<br>
Best Regards</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4914">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4914">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4904" name="comment4904" id="comment4904">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 08 May 2018 21:41		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Wim Janse, Unfortunately It won't fix your issue if you need IP6 as the dnsmasq is only configured for ip4. But it is capable of handling ip6 so if you're able to configured dnsmasq for ip6 then I will support if there are any changes needed to the autohotspot script for you.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4904">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4904">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4898" name="comment4898" id="comment4898">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Wim Janse" width="48">
				
				<span class="commentDate">
		    	Sunday, 06 May 2018 10:57		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Wim Janse			    		    </span>

		    <p>Hi roboberry,<br>
<br>
Thanks for the feedback, I'm eager to see your solution for ip6, as now I have another problem, ie. xrdp (remote desktop) is not longer working, as this needs both an ip4 and ip6 address (which is a bug in xrdp, already for almost a year since someone noticed this)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4898">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4898">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4895" name="comment4895" id="comment4895">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 01 May 2018 19:56		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Wim Janse, Your welcome, thanks for feedback. This seems to be an issue for only a few users so not sure why ip6 ip's cause an issue. I'm working on setup that seems to cause an ip issue if the boot time is slow which may fix your issue as well, which I post when fully tested.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4895">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4895">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4892" name="comment4892" id="comment4892">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Wim Janse" width="48">
				
				<span class="commentDate">
		    	Saturday, 28 April 2018 14:19		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Wim Janse			    		    </span>

		    <p>Hi roboberry,<br>
<br>
thanks for this fantastic guide, very well done.<br>
<br>
Just to inform you, I installed all this on a brand new RPi3B+ with latest version Stretch.<br>
I encountered same problem as Carlo, ie. could not login with SSH, this worked only after a ping from the RPi to my iPad.<br>
However, the solution given by IPv4 here below did the trick, everything working flawlessly.<br>
<br>
So thanks again, and thanks to IPv4.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4892">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4892">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4880" name="comment4880" id="comment4880">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Thursday, 19 April 2018 12:40		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Mana, you're welcome :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4880">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4880">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4877" name="comment4877" id="comment4877">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Mana" width="48">
				
				<span class="commentDate">
		    	Sunday, 15 April 2018 17:51		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Mana			    		    </span>

		    <p>Hi roboberry,<br>
<br>
    Thank you so much for this post. This is the one I was looking after tried so many set up.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4877">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4877">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4871" name="comment4871" id="comment4871">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 11 April 2018 22:35		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi, Ole, i have just tested CraftBeerPi with both this hotspot script and the static hotspot process. They both generated a hotspot and connected to CraftBeerPi without issue. I was able to access it from two android devices and surf the net as ethernet was connected. So im not able to replicate the issue.<br>
<br>
I have; country_code=GB added to the hostapd.conf file but otherwise as my guide. <br>
If not done already set your localisation in raspberry pi config. If you have any detail of the issue i will try to look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4871">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4871">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4870" name="comment4870" id="comment4870">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 11 April 2018 21:27		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Ole, I am going to install Cratfbeerpi as i'm interested to see what the issue is. I see it uses flask as the webserver which I know works as I have used it with the hotspot so there is obviously a config conflict somewhere. I will let you know what I find.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4870">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4870">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4869" name="comment4869" id="comment4869">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Ole" width="48">
				
				<span class="commentDate">
		    	Wednesday, 11 April 2018 14:48		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Ole			    		    </span>

		    <p>I just removed it.<br>
<br>
I tried starting and stopping Craftbeerpi, then it started working but then SSH failed to connect.<br>
<br>
After reboot some times it seemed like SSH worked, some times Craftbeerpi..<br>
<br>
I may get it again, got any else ideas?<br>
<br>
( Currently I'm just using an esp8266 as hotspot powered by the pi itself when away from WiFi. But ofc this is not optimal )</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4869">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4869">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4868" name="comment4868" id="comment4868">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 10 April 2018 21:15		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Oleost<br>
<br>
Some people have had similar issues with other services, unfortunately I have not been able to replicate them.<br>
Try adding the country code to /etc/hostapd/hostapd.conf<br>
<br>
country_code=GB<br>
<br>
change GB to your country if not the UK. If your not sure what your code should be it will be in /etc/wpa_supplicant/wpa_supplicant in the top 3 lines.<br>
<br>
can you confirm that the Ethernet ip is not working with 192.168.50.5 <br>
<br>
let me know if this helps</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4868">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4868">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4865" name="comment4865" id="comment4865">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Oleost" width="48">
				
				<span class="commentDate">
		    	Monday, 09 April 2018 22:09		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Oleost			    		    </span>

		    <p>Hi, thanks for providing script and tutorial.<br>
<br>
Im trying to setup this on an RPi3, running Rasbian Strech with Craftbeerpi 3 installed. <a target="_blank" rel="nofollow" href="https://github.com/Manuel83/craftbeerpi3">https://github.com/Manuel83/craftbeerpi3</a><br>
<br>
The Craftbeerpi 3 interface is accessed at <a target="_blank" rel="nofollow" href="http://raspberry.ip/">http://raspberry.ip</a>:5000<br>
<br>
But when I try and access it through 192.168.50.5:5000 I while in hotspot mode I`m unable to get the interface up. If I connect the ethernet cable again it works again at the newly assigned RPi3 IP adress.<br>
<br>
<br>
Any ideas to make it work ?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4865">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4865">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4859" name="comment4859" id="comment4859">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 04 April 2018 19:49		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi IPv4, thanks for letting us know, appreciated.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4859">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4859">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4858" name="comment4858" id="comment4858">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="IPv4" width="48">
				
				<span class="commentDate">
		    	Monday, 02 April 2018 20:16		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    IPv4			    		    </span>

		    <p>Hi Roboberry,<br>
<br>
Thanks for this great guide!<br>
<br>
I had similar issues as Carlos when following your instructions on a fresh install of the 2018-03-13-raspbian-stretch-lite image. My issues was solved by disabling IPv6.<br>
<br>
IPv6 was disabled by adding the following to /etc/sysctl.conf:<br>
<br>
net.ipv6.conf.all.autoconf = 0<br>
net.ipv6.conf.all.accept_ra = 0<br>
net.ipv6.conf.all.disable_ipv6 = 1 <br>
<br>
Thanks!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4858">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4858">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4849" name="comment4849" id="comment4849">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 28 March 2018 21:14		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Carlos, thanks for the clarification. The IP should not be available unless dnsmasq is running. The dhcpcd service is running wifi when the network is up and there will be no ip config set up there and /etc/network/interfaces has no config in Stretch. The 192.168.100.1 ip is only referenced in the autohotspotN script and will only be setup  when the hotspot is generated by autohotspotN as it isn't entered in dnsmasq.conf so it dosn't make sense to me. With the PI in network mode with ethernet in, using the command ip addr do you see the ip 192.168.100.1 assigned to wlan0 and is there more than one IP assigned?<br>
<br>
Im not able to reproduce your issue, I will have a go with a new image and SD. Again with the country code for the hotspot. I know it is required for 5GHz mode using hw_mode=a in hostapd.conf but it runs fine without a country code as long as it is  hw_mode=g<br>
<br>
Thanks for the info and I will let you know if I can find the issue.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4849">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4849">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4848" name="comment4848" id="comment4848">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Carlos" width="48">
				
				<span class="commentDate">
		    	Wednesday, 28 March 2018 10:13		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Carlos			    		    </span>

		    <p>Hi,<br>
<br>
I just added my country code to hostapd.conf and it seems to work now:<br>
<br>
country_code=ES<br>
<br>
What I cannot figure out is why it worked with an Ethernet cable connected to the RPi - maybe the connectivity was done via eth0 although the IP used to ping/SSH belonged to the hotspot generated network.<br>
<br>
Ocen again thanks Roboberry!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4848">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4848">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4847" name="comment4847" id="comment4847">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Carlos" width="48">
				
				<span class="commentDate">
		    	Wednesday, 28 March 2018 08:32		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Carlos			    		    </span>

		    <p>Dear Roboberry,<br>
<br>
Excuse me, I did not explain myself. What I meant is that as long as an Ethernet cable is plugged into the RPi *before* the hotspot (hostapd + dnsmasq) is started (not started on boot but with cron-driven /usr/bin/autohotspotN instead) I can connect to the wi-fi network generated by the RPi, ping its IP (which in my case is x.x.100.1) and access it through SSH (of course through wlan0). Once the hotspot is initiated this way I can unplug the Etherne cable and I am still able to ping and SSH the RPi as before.<br>
<br>
On the other hand, if no Ethernet cable is connected to the RPi before the hotspot initialization, I can connect to the wi-fi generated by the RPi but I cannot ping or SSH it. I tried to plug the Ethernet cable after this but it does not work as if it were plugged before de hotspot starting (i.e. I still cannot ping or SSH the RPi).<br>
<br>
In the second case my PC gets an IP from the configured range in the RPi, subnet mask and gateway IP as expected. I can also access the RPi via eth0 and check (systemctl status) the hostapd and dnsmasq and everything seems to be OK. The only thing that I noticed is that in the second case (no Ethernet cable plugged before hotspot initialization) my PC (and also my phone) does not connect as quickly as it does on the first case.<br>
<br>
I appreciate the offer to review my config files but I do not think they are the root of the problem. We are missing something that occurs in my setup (and Vincent and Adam's too) which is causing the problem. I will keep investigating. Please e-mail me if you eventually find what is happening.<br>
<br>
Thank you!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4847">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4847">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4845" name="comment4845" id="comment4845">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 27 March 2018 21:45		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Carlos, It seems a bit strange that the Ethernet can access the hotspot IP. Dnsmasq settings are for wlan0 and not eth0. The ethernet IP should be generated by the network it is connected to, so for me the ethernet is from my router at 192.168.0.47 the hotspot for wifi devices is 192.168.50.5 generated by the PI and gets routed the the Internet via the ip tables. <br>
Check that the dnsmasq and hostapd services are disabled from auto staring<br>
sudo systemctl disable dnsmasq<br>
sudo systemctl disable hostapd<br>
<br>
I presume there is no additional config for your ip added to /etc/dhcpcd.conf<br>
<br>
I have updated my OS and tested it on a Pi3 and a PI3 B+, which generated a hotspot and managed to connect my PC, android tablet, the other pi to the hotspot and ssh from them all. So I can't reproduce your issue. Though Adam R is reporting ssh issues so maybe something has changed in the last update but unfortunately im not getting it. <br>
<br>
Your welcome to email me you config files and copy of the script and I will check them out on my pi but they should be the same.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4845">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4845">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4843" name="comment4843" id="comment4843">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Adam R" width="48">
				
				<span class="commentDate">
		    	Tuesday, 27 March 2018 18:28		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Adam R			    		    </span>

		    <p>I have the same issue as Vincent, except that I noticed that SSH and PING work from my Macbook to the Pi (192.168.50.5) BEFORE the DHCP server on the Pi assigns my Macbook an IP address. As soon as an IP address is assigned to my Macbook, the connection to 192.168.50.5 is terminated.<br>
<br>
Hope that helps narrow down the issue.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4843">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4843">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4841" name="comment4841" id="comment4841">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Carlos" width="48">
				
				<span class="commentDate">
		    	Tuesday, 27 March 2018 11:04		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Carlos			    		    </span>

		    <p>Dear Roboberry,<br>
<br>
Thank you for your quick reply. I can confirm the changes I made regarding IPs are the same as you pointed and dnsmasq and hostapd seem to work fine. I also changed the wi-fi channel and the problem persists.<br>
<br>
I forgot to mention a couple of things that are probably important:<br>
<br>
1) I am using a brand new Raspberry Pi 3 B+ with Raspbian Stretch / Linux rpitesting 4.9.80-v7+ #1098 SMP Fri Mar 9 19:11:42 GMT 2018 armv7l GNU/Linux.<br>
<br>
2) I am not wiring the RPi to an Ethernet cable since I do not need Internet when there is no wi-fi on range, just SSH.<br>
<br>
I have been testing and I can reach 192.168.100.1 when an Ethernet cable is connected before the hotspot is mounted and it remains accessible even if I unplug the cable after hostapd and dnsmasq are active. But if no Ethernet cable is connected before the starting of the hotspot I have no access to the RPi IP (no ping, no SSH), even if I plug it after or even if I disconnect from the hotspot wi-fi network and connect back.<br>
<br>
I tried to comment out the iptables forwarding directives in /usr/bin/autohotspotN but it has no visible effect in this behavior.<br>
<br>
If you need more info or there is something I can do for you on this matter please ask me to.<br>
<br>
Thanks in advance!<br>
<br>
Carlos.<br>
<br>
PS:<br>
<br>
pi@rpitesting:~ $ sudo systemctl status dnsmasq<br>
 dnsmasq.service - dnsmasq - A lightweight DHCP and caching DNS server<br>
   Loaded: loaded (/lib/systemd/system/dnsmasq.service; disabled; vendor preset: enabled)<br>
   Active: active (running) since Tue 2018-03-27 09:49:37 UTC; 13min ago<br>
  Process: 515 ExecStartPost=/etc/init.d/dnsmasq systemd-start-resolvconf (code=exited, status=0/SUCCESS)<br>
  Process: 504 ExecStart=/etc/init.d/dnsmasq systemd-exec (code=exited, status=0/SUCCESS)<br>
  Process: 501 ExecStartPre=/usr/sbin/dnsmasq --test (code=exited, status=0/SUCCESS)<br>
 Main PID: 514 (dnsmasq)<br>
   CGroup: /system.slice/dnsmasq.service<br>
           514 /usr/sbin/dnsmasq -x /run/dnsmasq/dnsmasq.pid -u dnsmasq -r /run/dnsmasq/resolv.conf -7 /etc/dnsmasq.<br>
<br>
Mar 27 09:49:37 rpitesting dnsmasq[514]: using nameserver 8.8.8.8#53<br>
Mar 27 09:49:37 rpitesting dnsmasq[514]: read /etc/hosts - 5 addresses<br>
Mar 27 09:49:37 rpitesting dnsmasq[515]: Too few arguments.<br>
Mar 27 09:49:37 rpitesting systemd[1]: Started dnsmasq - A lightweight DHCP and caching DNS server.<br>
Mar 27 09:50:33 rpitesting dnsmasq-dhcp[514]: DHCPREQUEST(wlan0) 192.168.100.138 f4:f2:6d:1e:07:52<br>
Mar 27 09:50:33 rpitesting dnsmasq-dhcp[514]: Ignoring domain iei.local for DHCP host name Puesto07<br>
Mar 27 09:50:33 rpitesting dnsmasq-dhcp[514]: DHCPACK(wlan0) 192.168.100.138 f4:f2:6d:1e:07:52 Puesto07<br>
Mar 27 10:00:27 rpitesting dnsmasq-dhcp[514]: DHCPREQUEST(wlan0) 192.168.100.138 f4:f2:6d:1e:07:52<br>
Mar 27 10:00:27 rpitesting dnsmasq-dhcp[514]: Ignoring domain iei.local for DHCP host name Puesto07<br>
Mar 27 10:00:27 rpitesting dnsmasq-dhcp[514]: DHCPACK(wlan0) 192.168.100.138 f4:f2:6d:1e:07:52 Puesto07<br>
<br>
pi@rpitesting:~ $ sudo systemctl status hostapd<br>
 hostapd.service - LSB: Advanced IEEE 802.11 management daemon<br>
   Loaded: loaded (/etc/init.d/hostapd; generated; vendor preset: enabled)<br>
   Active: active (running) since Tue 2018-03-27 09:49:38 UTC; 13min ago<br>
     Docs: man:systemd-sysv-generator(8)<br>
  Process: 568 ExecStart=/etc/init.d/hostapd start (code=exited, status=0/SUCCESS)<br>
   CGroup: /system.slice/hostapd.service<br>
           574 /usr/sbin/hostapd -B -P /run/hostapd.pid /etc/hostapd/hostapd.conf<br>
<br>
Mar 27 09:50:33 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 IEEE 802.11: associated<br>
Mar 27 09:50:33 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 RADIUS: starting accounting session 5ABA13B2-000<br>
Mar 27 09:50:33 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 WPA: pairwise key handshake completed (RSN)<br>
Mar 27 10:00:01 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 WPA: group key handshake completed (RSN)<br>
Mar 27 10:00:25 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 IEEE 802.11: disassociated<br>
Mar 27 10:00:25 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 IEEE 802.11: associated<br>
Mar 27 10:00:25 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 IEEE 802.11: disassociated<br>
Mar 27 10:00:27 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 IEEE 802.11: associated<br>
Mar 27 10:00:27 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 RADIUS: starting accounting session 5ABA13B2-000<br>
Mar 27 10:00:27 rpitesting hostapd[574]: wlan0: STA f4:f2:6d:1e:07:52 WPA: pairwise key handshake completed (RSN)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4841">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4841">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4840" name="comment4840" id="comment4840">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Monday, 26 March 2018 20:35		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Carlos, Thank you. I don't know if Vincent resolved the issue but are you able to try it from a different device and also try changing the channel in the hostapd.conf file just in case of interference?<br>
<br>
The other option is when the hotspot is up, stop hostapd and run it manual and see what feedback it gives.<br>
enter: sudo systemctl stop hostapd<br>
then: sudo hostapd /etc/hostapd/hostapd.conf<br>
then try to connect your device again and see what feedback you get, add -d or -dd to see more detail, actually quite a lot :)  sudo hostapd -d /etc/hostapd/hostapd.conf<br>
<br>
<br>
Also check dnsmasq is still running ok with sudo systemctl status dnsmasq it should say active in green and no errors in the lower text.<br>
<br>
just to confirm your changes <br>
/etc/dnsmasq.conf will have<br>
dhcp-range=192.168.100.150,192.168.100.200,255.255.255.0,12h<br>
<br>
and the autohotspotN script will be <br>
createAdHocNetwork()<br>
{<br>
    ip link set dev "$wifidev" down<br>
    ip a add 192.168.100.1/24 brd + dev "$wifidev"<br>
<br>
Let me know how you get on either way. If still an issue I will look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4840">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4840">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4839" name="comment4839" id="comment4839">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Carlos" width="48">
				
				<span class="commentDate">
		    	Monday, 26 March 2018 15:21		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Carlos			    		    </span>

		    <p>Hi,<br>
<br>
First of all thank you for such a good pice of work.<br>
<br>
I am experiencing the same issue as Vincent mentioned previously - I cannot connect via SSH to the RPi after it creates the hotspot and I connect to it. Any ideas on what I'm doing wrong? The only thing I altered from your guide for compatibility reasons is the RPi IP (192.168.100.1 instead of 192.168.50.5) and the range of DHCP to match this network.<br>
<br>
Thanks in advance!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4839">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4839">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4814" name="comment4814" id="comment4814">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 06 March 2018 20:48		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Guy, Good to see the script is being put to good use. Thanks for the reference in the script.<br>
<br>
Not something I have needed to look at but my initial thoughts would be to create a new function that checks /sys/class/net/ for devices starting with e and capture the name. Then determine if you have a valid connection to a router, ip command or the options found in the /sys/class/net/folder. This returns true or false.<br>
<br>
I would call the new function after the FindSSID call and capture the result in a variable.<br>
Then in the main IF sequence add in a elseif that if eth0 (or similar device name) is true then print "Ethernet up"<br>
<br>
The logic would then be that, wifi is activated if available ssid found, if no wifi found check LAN variable is True then do no more, if Lan variable is False continue to the hotspot creation.<br>
<br>
If you don't have much luck let me know via email and I will look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4814">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4814">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4813" name="comment4813" id="comment4813">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Guy Sheffer" width="48">
				
				<span class="commentDate">
		    	Tuesday, 06 March 2018 08:12		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Guy Sheffer			    		    </span>

		    <p>Hey!<br>
Thanks for the guide! Creator of CustomPiOS here, I made for it an auto-hotspot module. So now any distro can now use this.<br>
Source is here: <a target="_blank" rel="nofollow" href="https://github.com/guysoft/CustomPiOS/tree/CustomPiOS/src/modules/auto-hotspot">https://github.com/guysoft/CustomPiOS/tree/CustomPiOS/src/modules/auto-hotspot</a><br>
<br>
I have a question - what should I add to the script so when an ethernet cable is connected it would not bring up the hotspot? I want to set an option only if the device failed to connect to a network then it will bring up the network and let you set it up.<br>
That way CustomPiOS can make distros with an auto-hotspot to set them up.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4813">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4813">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4803" name="comment4803" id="comment4803">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 21 February 2018 20:40		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Kit, is your issue just when your PI connects to your router or an issue in hotspot mode?<br>
<br>
I have a similar problem with my PI3 connecting to my android tablet, the ip just won't authorise. But other devices will happily connect without an issue. Also If I take the SD card from the PI3 and put it in a Pi Zero W or PI2 the android tablet connects fine. So the issue for me is just between the PI3 and my android tablet the script and setup is fine.<br>
<br>
if you are having an issue with connecting to your router double check you have the 3 lines at the top of your wpa_supplicant.conf file. It should be something like<br>
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>
update_config=1<br>
country=GB<br>
<br>
Check that dnsmasq is not active with sudo systemctl status dnsmasq, it should show it is not active (dead)<br>
<br>
If thats fine add; nohook wpa_supplicant<br>
to the bottom of the /etc/dhcpcd.conf file. This will allow the autohotspot script to start network wifi.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4803">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4803">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4802" name="comment4802" id="comment4802">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Kit" width="48">
				
				<span class="commentDate">
		    	Wednesday, 21 February 2018 02:47		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Kit			    		    </span>

		    <p>I have most of this setup, but the Wifi network keeps disconnecting and reconnecting every few seconds.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4802">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4802">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4786" name="comment4786" id="comment4786">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Thursday, 08 February 2018 21:46		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi Vincent, are you able to try from a different device just to confirm it's not just an issue between the pi and the phone. I use an android tablet and someone get delays before they see each other, but other devices connect ok.<br>
<br>
Another possible issue could be interference so maybe change the channel in the /etc/hostapd.conf file from 6 to say to 3. <br>
Let me know how you get on and i will look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4786">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4786">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4784" name="comment4784" id="comment4784">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="vincent" width="48">
				
				<span class="commentDate">
		    	Thursday, 08 February 2018 07:03		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    vincent			    		    </span>

		    <p>Hi, Thanks for these great scripts! <br>
<br>
I follow the steps and when under autospot mode, my phone can get an ip address from pi, but can not ping the pi's IP address(192.168.50.5) or ssh to the pi. But if I try to ping my phone's address on the pi, then the network will be ok, both ping and ssh starts to work.  No error from output of systemctl status dnsmasq or hostapd. Does anyone have an idea ? thanks!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4784">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4784">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4769" name="comment4769" id="comment4769">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 30 January 2018 20:05		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Jason, Not sure why you don't have a sysctl.conf file, are you using Raspbian Jessie or Stretch? Just check you have a /etc/sysctl.d folder. you can create a new /etc/sysctl.conf file and just add net.ipv4.ip_forward=1 and it should work. In the manual it lists other locations the conf file can be found, enter man sysctl.conf<br>
<br>
Could you let me know what the wifi icon is doing if it is not the double arrows and what does it say when the mouse is put on it.<br>
Is the network mode working ok and connecting to your router? <br>
While attempting hotspot mode check the status of dnsmasq and hostapd with <br>
sudo systemctl status dnsmasq and sudo systemctl status hostapd and check for any errors.<br>
Also what does the autohotspotN script report when it is run manually? <br>
<br>
The timer is not required and won't cause any issues.<br>
<br>
Let me know what results you get and I will look into this further</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4769">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4769">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4767" name="comment4767" id="comment4767">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="jason" width="48">
				
				<span class="commentDate">
		    	Monday, 29 January 2018 09:27		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    jason			    		    </span>

		    <p>HI Roboberry<br>
Ive added all the scripts etc and still not getting the access point to show double arrows.<br>
Ive tried the trouble shooting and no go with teh SSID test to "off"<br>
<br>
I havnt set up the timer, would this need to be setup.<br>
cheers<br>
jason</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4767">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4767">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4766" name="comment4766" id="comment4766">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Jason" width="48">
				
				<span class="commentDate">
		    	Monday, 29 January 2018 06:02		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Jason			    		    </span>

		    <p>Hi Rob,<br>
Great script and exactly what I was needing but you've heard this before.<br>
<br>
When I opened the file to edit:<br>
sudo nano /etc/sysctl.conf<br>
It was blank, what should have been in there?<br>
I'm using the latest rasbian and have done updates etc as per start.<br>
Cheers Jason</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4766">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4766">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4763" name="comment4763" id="comment4763">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Sunday, 21 January 2018 20:35		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Z-Wolf, thanks you for sharing your firewall friendly commands. Unfortunately that's is one of the issues, if ip-tables are already setup it will probably cause a conflict. It will be a useful addition, I will add them in to the article as additional notes. Thanks</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4763">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4763">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4762" name="comment4762" id="comment4762">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Z-WolF" width="48">
				
				<span class="commentDate">
		    	Sunday, 21 January 2018 01:56		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Z-WolF			    		    </span>

		    <p>Hi there,<br>
<br>
I have firewalld on my raspi3, and it did not wanted to play nice with the iptables commands on the script. So i translated them to firewall-cmd.<br>
<br>
createAdHocNetwork()<br>
{<br>
... Line 42 onwards<br>
#iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE<br>
firewall-cmd --direct -add-rule ipv4 nat POSTROUTING 0 -o eth0 -j MASQUERADE<br>
#iptables -A FORWARD -i eth0 -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT<br>
firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i eth0 -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT<br>
#iptables -A FORWARD -i "$wifidev" -o eth0 -j ACCEPT<br>
firewall-cmd --direct --add-rule ipv4 filter FORWARD 0 -i "$wifidev" -o eth0 -j ACCEPT<br>
...<br>
}<br>
<br>
KillHotSpot()<br>
{<br>
... Line 56 or 60 (may vary depending on lines above)<br>
firewall-cmd --direct --remove-rule ipv4 nat POSTROUTING 0 -o eth0 -j MASQUERADE<br>
#iptables -D FORWARD -i eth0 -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT<br>
firewall-cmd --direct --remove-rule ipv4 filter FORWARD 0 -i eth0 -o "$wifidev" -m state --state RELATED,ESTABLISHED -j ACCEPT<br>
#iptables -D FORWARD -i "$wifidev" -o eth0 -j ACCEPT<br>
firewall-cmd --direct --remove-rule ipv4 filter FORWARD 0 -i "$wifidev" -o eth0 -j ACCEPT<br>
...<br>
}<br>
<br>
Added the removal of MASQUERADE otherwise throws a warning that rule already exists when hotspot -&gt; wifi client -&gt; hotspot dance.<br>
<br>
Hope it helps.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4762">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4762">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4760" name="comment4760" id="comment4760">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Friday, 19 January 2018 11:10		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Fredo<br>
My Nexus 7 use to do that which is what I was using but when the AP got dropped from KitKat onwards, I had to come up with a different solution which is where the script came from. But I'm glad you have found a suitable solution for you.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4760">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4760">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4757" name="comment4757" id="comment4757">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="fredo" width="48">
				
				<span class="commentDate">
		    	Thursday, 18 January 2018 09:14		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    fredo			    		    </span>

		    <p>Hi, roboberry, thnx for the info.<br>
found a simpler solution: create a ap on my android, let kali connect to ap. that does it for me.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4757">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4757">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4755" name="comment4755" id="comment4755">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 17 January 2018 15:16		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi fredo, It has only been tested on Raspbian Jessie and Raspbian Stretch. A user did try using  a previous version on Kali but I think he had issues generating the hotspot.<br>
Raspbians network is managed by the dhcpcd.service so if Kali uses a network manager then it probably doesn't work. If sudo systemctl status dhcpcd shows that dhcpcd starts wpa_supplicant, the /etc/network/interfaces file is not used and then there may be a chance but I can't confirm it will. <br>
If you do give it a go it would be good to know if it works ok.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4755">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4755">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4754" name="comment4754" id="comment4754">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="fredo" width="48">
				
				<span class="commentDate">
		    	Wednesday, 17 January 2018 12:38		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    fredo			    		    </span>

		    <p>Hi!<br>
Any idea if this works on Kali Linux/Arm too?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4754">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4754">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4752" name="comment4752" id="comment4752">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Sunday, 07 January 2018 20:46		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>HI JWBlank, If you run the script manually with sudo /usr/bin/autohotspotN it should switch as the script takes down the network settings. I presume the autohotspot service is not running as the network is brought up by the system as normal at boot. The script assess the situation and changes to a hotspot at that point, so the autohotspotN script has not run or there is an error. <br>
So either the service is not running, redo sudo systemctl enable autohotspot<br>
the scripts permissions are not ok, sudo chmod +x /usr/bin/autohotspotN<br>
or there is an error causing the script not to run. Running it manually with sudo /usr/bin/autohotspotN should highlight any issues there.<br>
or use sudo systemctl status autohotspot to get the service status.<br>
<br>
Let me know what issues you find and I will do my best to get you up and running.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4752">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4752">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4751" name="comment4751" id="comment4751">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="JWBlank" width="48">
				
				<span class="commentDate">
		    	Sunday, 07 January 2018 01:33		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    JWBlank			    		    </span>

		    <p>This is exactly what I've been looking for. Unfortunately, I'm stuck getting it to start the hotspot. As suggested, I've edited /etc/wpa_supplicant/wpa_supplicant.conf to read "Myssidoff". But when I login, I'm still automatically connected to Myssid. Is it possible NetworkManager is taking over?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4751">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4751">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4746" name="comment4746" id="comment4746">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Thursday, 28 December 2017 09:13		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Islam, Your welcome. Thanks for the tip. It is set for the most widely used settings but, it makes sense to add in N as well now. I will add that to my to do list</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4746">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4746">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4745" name="comment4745" id="comment4745">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Thursday, 28 December 2017 09:08		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Shibu, Thank you and I'm glad it is useful to you.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4745">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4745">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4744" name="comment4744" id="comment4744">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Shibu" width="48">
				
				<span class="commentDate">
		    	Monday, 25 December 2017 23:51		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Shibu			    		    </span>

		    <p>Hi,<br>
Great idea, something exactly what I was looking for. Appreciate spending time in documenting this in detail. It worked perfectly on my pi zero.<br>
Thank You!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4744">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4744">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4738" name="comment4738" id="comment4738">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Islam Mansour" width="48">
				
				<span class="commentDate">
		    	Saturday, 23 December 2017 23:49		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Islam Mansour			    		    </span>

		    <p>Thanks so much for such awesome tutorial, I tried it and it works really well, that is what I needed.<br>
<br>
I wanted to mention to increase the speed of the wifi, this option can be used to enable the 802.11n support.<br>
Simply, add this following line to at the end of this file:<br>
sudo nano /etc/hostapd/hostapd.conf<br>
<br>
ieee80211n=1          # 802.11n support</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4738">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4738">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4731" name="comment4731" id="comment4731">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Sunday, 17 December 2017 23:53		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Marc, The wpassid line will return a single string containing all ssids in wpa_supplicant with a comma between each entry. With these two lines<br>
IFS=","<br>
ssids=($wpassid)<br>
ssids gets a list of each ssid from the string.<br>
<br>
There will be an issue if in the wpa_supplicant file the ssid has no quote marks <br>
ie ssid=myssid rather than ssid="myssid"<br>
which will return a blank string. Also does your ssid have any other characters other than spaces letters and numbers?<br>
<br>
some users have not had the correct wpa_supplicant file which has caused similar issues. Does your /etc/wpa_supplicant/wpa_supplicant.conf file start with<br>
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>
update_config=1<br>
country=GB<br>
<br>
with country as your country if not GB. <br>
<br>
to see what is being returned from wpa_supplicant after IFS=$IFSdef #reset back to defaults<br>
enter this line<br>
<br>
echo "wpassid returns " $wpassid<br>
<br>
then when you run the autohotspot script manually you can see what it picks up.<br>
<br>
Let me know how you get on.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4731">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4731">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4729" name="comment4729" id="comment4729">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Marc" width="48">
				
				<span class="commentDate">
		    	Sunday, 17 December 2017 07:17		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Marc			    		    </span>

		    <p>Hi, Love your script, exactly what I was looking for.<br>
<br>
<br>
there is one small part I cannot get to work, retrieving the list of known ssids from wpa_supplicant.conf.<br>
<br>
I found the workarround by manually declaring my networks, but i would like the program to work as written :)<br>
<br>
I tried to find out why by dissecting this command <br>
<br>
wpassid=$(awk '/ssid="/{ print $0 }' /etc/wpa_supplicant/wpa_supplicant.conf | awk -F'ssid=' '{ print $2 }' ORS=',' | sed 's/\"/''/g' | sed 's/,$//')<br>
<br>
on the command line all this returns is a comma followed by the prompt. I think this is because of the ORS statement in the second awk command. Leaving that statement out does return a list of the ssids. However, this list cannot be processed in the rest of the script because I think it expects a single line. <br>
<br>
could you help me out?<br>
<br>
cheers, <br>
<br>
Marc</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4729">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4729">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4726" name="comment4726" id="comment4726">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Sunday, 10 December 2017 11:06		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi Greg, I have just checked out your comment from yesterday on a pi and have tried a few things but i can't replicate the issue. The lines you commented would only run if your ssid is being broadcast, hostapd is not running, so no hotspot is running and no ip has been assigned to wlan0 by a router.<br>
If your pi is getting the 169.254 ip then the status ip address may be not available which will cause it to run the lines you commented.<br>
<br>
Run wpa_cli -i status wlan0 , while the network is up. You should see a line ip_address, that's what is available when your router issues an ip. Until that point the line won't appear.<br>
<br>
Are you getting the ip from your router or the 169.254 ip still?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4726">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4726">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4725" name="comment4725" id="comment4725">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Greg" width="48">
				
				<span class="commentDate">
		    	Saturday, 09 December 2017 22:12		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Greg			    		    </span>

		    <p>I have just tried the following:<br>
-I deleted my network from wpa_supplicant.conf<br>
-reboot -&gt; starts in hotspot mode<br>
-I use my webinterface to add the network to wpa_supplicant.conf again<br>
-the website automatically runs /usr/bin/autohotspot (so I do not reboot)<br>
-shuts down the hotspot and turns on the wifi<br>
-Pi has internet access, everything works normally<br>
<br>
I think, in that case the lines I commented out do not matter because that branch of the if statement is not executed. It's weird - but it works.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4725">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4725">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4724" name="comment4724" id="comment4724">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Greg" width="48">
				
				<span class="commentDate">
		    	Saturday, 09 December 2017 21:45		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Greg			    		    </span>

		    <p>Hi,<br>
<br>
in my /etc/wpa_supplicant/wpa_supplicant.conf file, the order of the first three lines is different:<br>
<br>
country=GB<br>
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>
update_config=1<br>
<br>
also I do not have this line: key_mgmt=WPA-PSK, just the ssid and pwd.<br>
<br>
My /etc/.network/interfaces file does not have a config for wlan0 or an entry for wpa_supplicant.<br>
<br>
I'll try the rest of your suggestions.<br>
Cheers,<br>
Greg</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4724">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4724">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4722" name="comment4722" id="comment4722">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Saturday, 09 December 2017 21:15		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Greg, from your dhcpcd logs it shows wlan0: DHCP lease expired, this is why you are getting a 169.254. ip. The lease is managed by the router and the dhcp server. What should happen is each time you are issued an ip it is valid for a period of time such as 12 hours or 24 hours. When the wifi device is off and then brought back up the lease should be renewed. Your pi is not renewing the ip lease so it defaults to a local one. This is not the cause of the autohotspot script because all it does is take down wifi and bring it back up again.<br>
<br>
The lines you have disabled would cause no wifi to be generated when you go from hotspot to wifi. So you may have wpa_supplicant running twice on your pi from some other network config. I presume your /etc/.network/interfaces file has no config for wlan0 or an entry for wpa_supplicant?<br>
<br>
If you enter the command sudo dhclient -v you should get a line with your IP and renewal in 41568 seconds. the seconds may will be different. If this is really low then your lease will expire while your pi is active. <br>
<br>
if you do sudo dhclient -v -r it should release the ip and create a new lease. <br>
Try this with the autohotspot script enabled and disabled.<br>
<br>
The file /var/lib/dhcp/dhclient.leases should give you some info on current ip lease times.<br>
<br>
and sudo grep dhclient /var/log/syslog should tell you more on what it happening with your dhcp client.<br>
<br>
You can take down and bring up with the following commands to see if your lease is being renewed with the autohotspot script disabled.<br>
ip link set dev wlan0 down<br>
ip link set dev wlan0 up<br>
<br>
But something is not working properly on your network setup outside of the changes from the article. Disabling those lines should cause no network wifi from a hotspot on a standard network setup and have no effect if the wifi is already active.<br>
In normal use the wifi device is not brought down so you never see the effect of the lease not renewing when it brought back up.<br>
<br>
Can you confirm you /etc/wpa_supplicant/wpa_supplicant.conf file has the correct lines at the top of the file. As missing lines will cause issues  <br>
<br>
It should look like this but the country different if you are not in the UK<br>
<br>
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>
update_config=1<br>
country=GB<br>
<br>
network={<br>
	ssid="mySSID1"<br>
	psk="myPassword"<br>
	key_mgmt=WPA-PSK<br>
}<br>
<br>
<br>
Hopefully this highlight an underlying issue.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4722">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4722">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4721" name="comment4721" id="comment4721">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Greg" width="48">
				
				<span class="commentDate">
		    	Friday, 08 December 2017 23:17		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Greg			    		    </span>

		    <p>Hi,<br>
<br>
after a lot of headscratching, I commented two lines from your autohotspot script:<br>
<br>
       else #ssid exists and no hotspot running connect to wifi network<br>
              echo "Connecting to the WiFi Network"<br>
              #wpa_supplicant -B -i "$wifidev" -c /etc/wpa_supplicant/wpa_supplicant.conf &gt;/dev/null 2&gt;&amp;1<br>
              #ChkWifiUp<br>
<br>
Now everything works, both hotspot and client mode!<br>
<br>
Cheers,<br>
Greg</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4721">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4721">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4719" name="comment4719" id="comment4719">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Greg" width="48">
				
				<span class="commentDate">
		    	Thursday, 07 December 2017 20:09		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Greg			    		    </span>

		    <p>Hi, this is the output without the autohotspotN script:<br>
sudo systemctl status dhcpcd<br>
 dhcpcd.service - dhcpcd on all interfaces<br>
   Loaded: loaded (/lib/systemd/system/dhcpcd.service; enabled; vendor preset: enabled)<br>
   Active: active (running) since Thu 2017-12-07 20:17:26 CET; 49min ago<br>
  Process: 327 ExecStart=/usr/lib/dhcpcd5/dhcpcd -q -b (code=exited, status=0/SUCCESS)<br>
 Main PID: 356 (dhcpcd)<br>
   CGroup: /system.slice/dhcpcd.service<br>
           356 /sbin/dhcpcd -q -b<br>
           470 wpa_supplicant -B -c/etc/wpa_supplicant/wpa_supplicant.conf -iwlan0 -Dnl80211,wext<br>
<br>
Dec 07 21:03:03 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:04:15 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:05:17 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:05:52 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:05:56 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:05:59 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:06:02 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:07:16 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
Dec 07 21:07:20 raspberrypi dhcpcd[356]: wlan0: Router Advertisement from fe80::1<br>
<br>
and this is the output with autohotspotN script in client mode:<br>
sudo systemctl status dhcpcd <br>
 dhcpcd.service - dhcpcd on all interfaces<br>
   Loaded: loaded (/lib/systemd/system/dhcpcd.service; enabled; vendor preset: enabled)<br>
   Active: active (running) since Thu 2017-12-07 20:02:36 CET; 3min 18s ago<br>
  Process: 374 ExecStart=/usr/lib/dhcpcd5/dhcpcd -q -b (code=exited, status=0/SUCCESS)<br>
 Main PID: 383 (dhcpcd)<br>
   CGroup: /system.slice/dhcpcd.service<br>
           383 /sbin/dhcpcd -q -b<br>
           472 wpa_supplicant -B -c/etc/wpa_supplicant/wpa_supplicant.conf -iwlan0 -Dnl80211,wext<br>
<br>
Dec 07 20:02:42 raspberrypi dhcpcd[383]: wlan0: adding address fe80::4123:a746:4449:c48b<br>
Dec 07 20:02:42 raspberrypi dhcpcd[383]: wlan0: soliciting an IPv6 router<br>
Dec 07 20:02:43 raspberrypi dhcpcd[383]: wlan0: rebinding lease of 192.168.1.100<br>
Dec 07 20:02:48 raspberrypi dhcpcd[383]: wlan0: probing for an IPv4LL address<br>
Dec 07 20:02:48 raspberrypi dhcpcd[383]: wlan0: DHCP lease expired<br>
Dec 07 20:02:48 raspberrypi dhcpcd[383]: wlan0: soliciting a DHCP lease<br>
Dec 07 20:02:52 raspberrypi dhcpcd[383]: wlan0: using IPv4LL address 169.254.87.255<br>
Dec 07 20:02:52 raspberrypi dhcpcd[383]: wlan0: adding route to 169.254.0.0/16<br>
Dec 07 20:02:52 raspberrypi dhcpcd[383]: wlan0: adding default route</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4719">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4719">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4716" name="comment4716" id="comment4716">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 06 December 2017 23:19		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Greg, The IP should be the one issued by your router usually in the range 192.168.#.# but it seems that an ip address starting with 169.254.#.# is when there is no dhcp server running so the device assigns a local ip to itself. If you do a search for: linux ip starting with 169.254 there are a few discussions about it.<br>
When it goes into hotspot mode it will generate a 169.254 ip along with the 192.168.50.5 ip but it always disappears when the wifi network comes up. So for some reason your pi's dhcp server is not working right. I have tried various changes to the setup in the dhcpcd.conf file, adding config to /etc/network/interfaces file and enabling dnsmasq by default but have been unable to replicate your issue.<br>
<br>
you could try sudo systemctl status dhcpcd and see if you get any errors.<br>
also you can take out the line interface wlan0 in /etc/dhcpcd.conf it's not required but won't be causing the issue. Turns out to be a red herring in a development bug fix.<br>
<br>
Have you installed any other software for networking that may be conflicting?<br>
<br>
let me know if you make any progress and I will help where i can.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4716">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4716">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4715" name="comment4715" id="comment4715">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Greg" width="48">
				
				<span class="commentDate">
		    	Wednesday, 06 December 2017 21:54		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Greg			    		    </span>

		    <p>Thank you for your quick reply. I had some time to try different things and I noticed that in client mode (using your script), my pi gets a very strange IP address, that does not look like the one it normally gets:<br>
<br>
wlan0: flags=4163  mtu 1500<br>
        inet 169.254.87.255  netmask 255.255.0.0  broadcast 169.254.255.255<br>
        inet6 fe80::4123:a746:4449:c48b  prefixlen 64  scopeid 0x20<br>
        ether b8:27:eb:55:56:da  txqueuelen 1000  (Ethernet)<br>
        RX packets 255  bytes 31895 (31.1 KiB)<br>
        RX errors 0  dropped 0  overruns 0  frame 0<br>
        TX packets 393  bytes 47206 (46.0 KiB)<br>
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0 <br>
<br>
If I do ssh <a href="mailto:pi@169.254.87.255">pi@169.254.87.255</a> instead of ssh <a href="mailto:pi@raspberrypi.loc">pi@raspberrypi.loc</a>al, it connects instantaneously. However, things like:<br>
sudo apt-get update are still very slow.<br>
Does this ring any bell? <br>
<br>
I switched off IP-forwarding but that does not seem to make a difference.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4715">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4715">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4706" name="comment4706" id="comment4706">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Saturday, 02 December 2017 22:55		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Greg, seems a bit of a strange one. The script doesnt make any changes to the system if network is available at boot time. So other than ip_forwarding on by default, which is disabled when the autohotspot script runs there is no changes.<br>
I run ssh -v .... on my set up. <br>
In your results the line "debug1: /etc/ssh/ssh_config line 52: Applying options for *" is line 19 for me which refers to Hosts *<br>
Line 52 for me is #   RekeyLimit 1G 1h<br>
which doesnt activate due to the # so maybe something to look into.<br>
<br>
But it seems odd that it's fine when when you have disabled the script. Try enabling ip_forwarding but not the autohostpost script and see how ssh works. <br>
Presuming you have no other setup or firewall thats is using IP rules. Otherwise the IP_forward dosn't do anything until the ip-tables are set. <br>
<br>
let me know if you have any luck. You could try the the other autohotspot setup and script on your pi, just to see if there may be something else conflicting as the Direct article is more basic.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4706">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4706">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4705" name="comment4705" id="comment4705">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Greg" width="48">
				
				<span class="commentDate">
		    	Saturday, 02 December 2017 19:46		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Greg			    		    </span>

		    <p>Thank you very much for this tutorial. It is exactly what I needed. <br>
I have a pi 3 with stretch. I followed every step and it works. But there are some problems:<br>
When the pi finds my wifi network and goes into client mode, I have problems connecting to it via ssh. The connection will eventually be established, but it takes ages. Also some other things do not work properly, e.g. youtube-dl, apt-get update, ...<br>
When the pi runs in ap mode, ssh works just fine.<br>
<br>
I reversed everything as you described and all is back to normal. However, I would really love to use your script. Do you have any idea what the problem might be?<br>
<br>
Here is some output from ssh when the pi runs in client mode, maybe it helps:<br>
<br>
ssh -v <a href="mailto:pi@raspberrypi.loc">pi@raspberrypi.loc</a>al<br>
OpenSSH_7.5p1, LibreSSL 2.5.4<br>
debug1: Reading configuration data /etc/ssh/ssh_config<br>
debug1: /etc/ssh/ssh_config line 52: Applying options for *<br>
debug1: Connecting to raspberrypi.local [fe80::4123:a746:4449:c48b%en1] port 22.<br>
debug1: connect to address fe80::4123:a746:4449:c48b%en1 port 22: Operation timed out<br>
debug1: Connecting to raspberrypi.local [169.254.87.255] port 22.<br>
debug1: Connection established.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4705">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4705">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4677" name="comment4677" id="comment4677">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Friday, 03 November 2017 21:48		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Dominaezzz, Thanks for the info. Having a blank wpa_supplicant file is fine, that doesn't cause an issue.<br>
<br>
Your dnsmasq output is fine, the lines you mention, dnsmasq[733]: using nameserver 8.8.8.8#53"<br>
 "dnsmasq[733]: read /etc/hosts - 5 addresses"<br>
 "dnsmasq[734]: Too few arguments."  <br>
<br>
are the same as my output. I decided to do a system update this evening and now I am getting issues as well. My laptop will connect to the AP and eventually get internet through the access point but my android tablet won't hold a connection. So may be related to your issue. It was all working fine until the update. <br>
Check your hostapd status as well to see if that shows an issue.<br>
<br>
I will try and solve my issue which may be related :(</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4677">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4677">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4676" name="comment4676" id="comment4676">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Dominaezzz" width="48">
				
				<span class="commentDate">
		    	Friday, 03 November 2017 21:05		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Dominaezzz			    		    </span>

		    <p>Everything seems okay.<br>
The output of dnsmasq status is:<br>
Nov 02 01:32:38 raspberrypi dnsmasq-dhcp[733]: DHCP, IP range 192.168.50.150 -- 192.168.50.200, lease time 12h<br>
Nov 02 01:32:38 raspberrypi dnsmasq-dhcp[733]: DHCP, sockets bound exclusively to interface wlan0<br>
Nov 02 01:32:38 raspberrypi dnsmasq[733]: using nameserver 8.8.8.8#53<br>
Nov 02 01:32:38 raspberrypi dnsmasq[733]: read /etc/hosts - 5 addresses<br>
Nov 02 01:32:38 raspberrypi dnsmasq[734]: Too few arguments.<br>
Nov 02 01:32:38 raspberrypi systemd[1]: Started dnsmasq - A lightweight DHCP and caching DNS server.<br>
Nov 02 01:38:09 raspberrypi dnsmasq-dhcp[733]: DHCPREQUEST(wlan0) 192.168.50.199 e4:a7:a0:45:e3:0e<br>
Nov 02 01:38:09 raspberrypi dnsmasq-dhcp[733]: DHCPACK(wlan0) 192.168.50.199 e4:a7:a0:45:e3:0e DOMINIC-LAPTOP<br>
Nov 02 01:46:09 raspberrypi dnsmasq-dhcp[733]: DHCPREQUEST(wlan0) 192.168.50.199 e4:a7:a0:45:e3:0e<br>
Nov 02 01:46:09 raspberrypi dnsmasq-dhcp[733]: DHCPACK(wlan0) 192.168.50.199 e4:a7:a0:45:e3:0e DOMINIC-LAPTOP</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4676">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4676">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4675" name="comment4675" id="comment4675">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Dominaezzz" width="48">
				
				<span class="commentDate">
		    	Thursday, 02 November 2017 22:44		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Dominaezzz			    		    </span>

		    <p>Also, I forgot to mention I don't have any wifi networks setup in my wpa_supplicant file because I didn't require it to connect to WiFi at all unless I can make it a wifi extender. I wanted the AP to always show.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4675">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4675">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4674" name="comment4674" id="comment4674">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Dominaezzz" width="48">
				
				<span class="commentDate">
		    	Thursday, 02 November 2017 22:36		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Dominaezzz			    		    </span>

		    <p>Hello again,<br>
Everything seems to be correct.<br>
The only thing that raised and eyebrow was the status of DNSmasq.<br>
The service is still active (running) but one of the lines says:<br>
<br>
"dnsmasq[733]: using nameserver 8.8.8.8#53"<br>
"dnsmasq[733]: read /etc/hosts - 5 addresses"<br>
"dnsmasq[734]: Too few arguments."            </p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4674">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4674">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4673" name="comment4673" id="comment4673">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Thursday, 02 November 2017 09:41		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi Dominaezzz, That sounds like DNSmasq is the issue. Have a look at the status with sudo systemctl status dnsmasq and also try sudo journalctl -xe<br>
This will tell you what is going on with it. During development of this I was getting the error; device not found wlan0. <br>
Double check that in /etc/dhcpcd.conf that the line added; interface wlan0 was not ending in a s, interfaces. You can guess how I know about that one :) and also double check the /etc/network/interfaces file has no device config in it.<br>
<br>
Let me know if that's not the issue and I will look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4673">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4673">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4672" name="comment4672" id="comment4672">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Dominaezzz" width="48">
				
				<span class="commentDate">
		    	Thursday, 02 November 2017 01:44		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Dominaezzz			    		    </span>

		    <p>Hello,<br>
Thank you for your post, found it very useful. Have been struggling with this on Stretch for a while now.<br>
I followed the instructions on a fresh install of Stretch and the access point shows up on my computer but there's no internet connection and I can't ssh into the pi using the IP address.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4672">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4672">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4671" name="comment4671" id="comment4671">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Monday, 30 October 2017 21:47		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Z, you're welcome. Thanks for confirming I didn't mess up the instructions :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4671">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4671">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4670" name="comment4670" id="comment4670">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Z" width="48">
				
				<span class="commentDate">
		    	Monday, 30 October 2017 21:39		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Z			    		    </span>

		    <p>Confirmed it works perfectly. Very well done! This made my day.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4670">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4670">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4669" name="comment4669" id="comment4669">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Z" width="48">
				
				<span class="commentDate">
		    	Monday, 30 October 2017 20:52		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Z			    		    </span>

		    <p>Roboberry,<br>
<br>
Wow, thank you so much! I'm going to try it right now. I'll post back with any issues.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4669">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4669">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4668" name="comment4668" id="comment4668">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Monday, 30 October 2017 20:01		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Z, The new script is now available, ran out of time at the weekend. This should get you up and running. Has been working fine for me :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4668">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4668">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4667" name="comment4667" id="comment4667">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Z" width="48">
				
				<span class="commentDate">
		    	Monday, 30 October 2017 04:51		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Z			    		    </span>

		    <p>Hey roboberry,<br>
<br>
Still no joy, that that might be due to the fact that I didn't start with a fresh pi install. Looking forward to the updated tutorial!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4667">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4667">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4663" name="comment4663" id="comment4663">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Thursday, 26 October 2017 23:31		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>hi Stephane, Thanks, i'm glad you have found it useful. you must be using Raspbian Jessie as it worked. I plan on updating the article this weekend with some changes so it will work on Raspbian Stretch as well. So if you upgrade to Stretch at some point, you will need to change your setup.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4663">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4663">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4660" name="comment4660" id="comment4660">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Stphane" width="48">
				
				<span class="commentDate">
		    	Thursday, 26 October 2017 09:44		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Stphane			    		    </span>

		    <p>Fantastic tutorial, thank you so much :) I didn't use the script cause I really just need the hotspot to use the pi as a local server to manage usb midi devices. I've set up an apache server, I just need to connect to the pi in wifi with my phone or tablet and I can interact in ssh or via the web server and some cgi.<br>
Great job!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4660">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4660">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4658" name="comment4658" id="comment4658">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="roboberry" width="48">
				
				<span class="commentDate">
		    	Tuesday, 24 October 2017 11:37		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    roboberry			    		    </span>

		    <p>Hi Z, I think recent updates to Hostapd and WPA_Supplicant have fixed the issues I was having with Stretch as I have it all working straight after the updates. I have one minor fix to make and will update the articles. Hopefully by the end of the week.<br>
For your issue on Stretch it sounds like the Hotspot and Wifi are both active, i.e. Hostapd and Dnsmasq are conflicting with wpa_supplicant.<br>
for this setup to work on stretch remove all the device setup from /etc/network/interfaces so it only shows the default 5 lines at the top.<br>
then in /etc/dhcpcd.conf at the bottom enter interface wlan0<br>
<br>
Wpa_supplicant is now run with the dhcpcd service but the entry in the interfaces file also runs it.<br>
<br>
If that doesn't help then check back later this week and the full setup will be posted plus the extra tweaks to the scripts.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4658">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4658">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4657" name="comment4657" id="comment4657">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Z" width="48">
				
				<span class="commentDate">
		    	Tuesday, 24 October 2017 07:53		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Z			    		    </span>

		    <p>Hey, great work here. As many have mentioned. Stretch is having some issues.<br>
<br>
I followed Popcorn's suggestion and changed a few lines in the code. However I'm still having issues getting the pi to connect to my home wifi.  It runs the AP fine, however whenever I turn on my home wifi, the AP disappears like normal, but it has trouble connecting to the home wifi.  It was able to reconnect once, however all other times I simply do not see it on my network.<br>
<br>
Anything you can suggest? Looking forward to that update for stretch! Thank you!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4657">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4657">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4650" name="comment4650" id="comment4650">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Randall Burks" width="48">
				
				<span class="commentDate">
		    	Thursday, 19 October 2017 04:59		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Randall Burks			    		    </span>

		    <p>Have been successfully using your hotspot this year via SSH for development. I am very interested in the following:<br>
1: On starting RPi 3B-Pixel, it unconditionally creates hotspot.<br>
2: While OS is running, if RPi 3B-Pixel detects my Android Phone Hotstpot (which has internet connection), dump your hotspot and connect to my Android Phone Hotspot so that it can get to the internet.<br>
3: While running, if RPi 3B-Pixel does not detect my Android Phone Hotspot, restart your hotspot.<br>
4: Would be nice if RPi 3B-Pixel detects my ethernet on my home network with internet, it overrides everything and uses ethernet to get to internet and SSH through ethernet.<br>
<br>
Note that all year I have been using your older version with great success to access via SSH over your hotspot and over ethernet and over WiFi. I just can't figure out how to integrate 1 thru 4 above.  Any suggestions? This is very important for my project.<br>
<br>
Thank You<br>
BurksFamly</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4650">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4650">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4645" name="comment4645" id="comment4645">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Wednesday, 11 October 2017 19:59		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi Valerio, for now you would need Jessie for this script to work as you need. Unfortunately the foundation only offers stretch so unless you have a backup you may find it hard to go back to Jessie.<br>
<br>
Lakshmi,<br>
I'm hoping to get it working soon as i want it working for myself as well. So hopefully a new script wont be too far away.<br>
<br>
Graeme</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4645">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4645">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4644" name="comment4644" id="comment4644">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Lakshmi Narasimman " width="48">
				
				<span class="commentDate">
		    	Wednesday, 11 October 2017 16:41		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Lakshmi Narasimman 			    		    </span>

		    <p>Is fix ready for raspbian  stretch</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4644">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4644">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4643" name="comment4643" id="comment4643">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Valerio" width="48">
				
				<span class="commentDate">
		    	Tuesday, 10 October 2017 18:57		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Valerio			    		    </span>

		    <p>.... apologies, I just went through the script and noticed a new bit at the end to disable the script :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4643">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4643">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4642" name="comment4642" id="comment4642">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Valerio" width="48">
				
				<span class="commentDate">
		    	Tuesday, 10 October 2017 18:46		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Valerio			    		    </span>

		    <p>Hi Graeme, <br>
<br>
Thanks for your reply! Essentially you're right, it turns out I'm using stretch and not jessie. However the script works in the sense that the RPi does set up its own hotspot and I can VNC into it (and WinSCP files to and from the RPi), which is what I needed it to do. <br>
<br>
However I now need to download some Arduino packages which require an internet connection, and this is where problems begin: I never quite checked whether the RPi could connect to a wifi on top of setting up the hotspot (the wifi at work is a bit of a nightmare for that), but I don't even see available networks on the RPi and just plugging in an ethernet cable makes no difference.  <br>
<br>
I have tried the first troubleshooting example, but it didn't make a difference (and I suppose it won't if I'm using Stretch)<br>
Also, when I run the sudo /usr/bin/autohotspotN command, I get "Hotspot already active"<br>
<br>
... so long story short, the script does the main thing I wanted it to do (the hotspot), but is there a way to 'temporarily' undo the changes described on this page, get the 'original' connectivity, download what I need and then 're-activate' the hotspot set up? One obvious way would be to follow the changes described here in reverse, but I was wondering if there was a quicker way.<br>
<br>
Also, can I just choose to install Raspbian Jessie as opposed to Raspbian Stretch if I were to re-install the OS? By the way, I'm using a RPi 3 Model B.<br>
<br>
Thanks again! In the meantime I will make the changes to the interfaces file<br>
<br>
Valerio</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4642">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4642">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4640" name="comment4640" id="comment4640">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Sunday, 08 October 2017 21:10		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi Popcorn, im glad you find the script useful. Thanks for the update. I have not had a lot of luck getting this working in Stretch, it didn't help that the call wpa_cli status just returns disconnected which was causing me problems so seeing that it works with wpa_cli -i wlan0 status solves part of my issue thank you.<br>
<br>
I have been working on the other script, direct access, but the suggestion you make are not working. The hotspot just won't come to life even though everything is running and in place.<br>
Stretch uses the dhcpcd service for network and wpa_supplicant is triggered with that so the /network/interfaces file should be blank. Ifup and ifdown use the interfaces file so wont work if the interfaces file is blank. Also for this script some of the settings in the interfaces file are not required so i updated it a few days ago. Also on stretch the wpa-conf line should be removed otherwise wpa_supplicant will be run twice.<br>
<br>
Is your version of stretch a new image or an upgrade of jessie? If you upgraded some Jessie features are available that may help this work that wont on a new image.<br>
<br>
I was starting to write a new script from scratch but i can have another go at a fix as it works on your setup at least.<br>
<br>
Roboberry</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4640">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4640">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4639" name="comment4639" id="comment4639">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Popcorn" width="48">
				
				<span class="commentDate">
		    	Sunday, 08 October 2017 00:13		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Popcorn			    		    </span>

		    <p>Hi Jeff,<br>
<br>
I'm using Raspbian Stretch and I was able to fix this intermittent "Failed to connect to non-global ctrl_ifname: (nil) error".  For some reason, wpa_supplicant needs a full cycle when switching wifi configurations or else it randomly does that.   So I added the following in the autohotspotN script:<br>
<br>
In the function called createAdHocNetwork(), add the following on the line after the opening "{" character<br>
<br>
    ifdown wlan0<br>
    ifup wlan0<br>
<br>
And also in the function called KillHotspot() add the following after the line "ip link set dev wlan0 down"<br>
<br>
    ifdown wlan0<br>
    ifup wlan0<br>
<br>
I also made one more change because wpa_cli was intermittently reporting a strange interface called "p2p-dev-wlan0" so this was causing a false negative situation that made the script think that the wifi connection couldn't be established causing the hotspot to reactivate.<br>
<br>
Look in the function called ChkWifiUp() and change this line:<br>
<br>
if ! wpa_cli status | grep 'ip_address' &gt;/dev/null 2&gt;&amp;1<br>
<br>
with this line:<br>
<br>
if ! wpa_cli -i wlan0 status | grep 'ip_address' &gt;/dev/null 2&gt;&amp;1<br>
<br>
That explicitly requests the wlan0 interface.<br>
<br>
After those changes, the script is working pretty great on Raspbian Stretch.  Thanks for the great script, Roboberry.  This has helped me (and apparently many others) immensely.  Kudos to you for the hard and detailed work!</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4639">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4639">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4637" name="comment4637" id="comment4637">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Roboberry" width="48">
				
				<span class="commentDate">
		    	Friday, 06 October 2017 20:23		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Roboberry			    		    </span>

		    <p>Hi Valerio, firstly I have made a change to the interfaces file. I thought I had done this weeks ago but clearly not. So can you also change your interface file, not that it will have caused your issue it's just is no longer required.<br>
<br>
The two lines with a cross means your wifi is down, which is usually because of configuration issues. You say "it worked beautifully" so does this mean it was working at some point, both network wifi and hotspot?<br>
<br>
Have you tried the first example in the trouble shooting section at the bottom of the guide?<br>
<br>
also if you open a terminal window and enter sudo /usr/bin/autohotspotN  what happens?<br>
<br>
and also just to confirm did you enter the commend in the red text, lsb_release -a ,and did it show the name Jessie? if it didn't show Jessie but showed Stretch then this script won't work for you. I'm still looking into a solution for Stretch but I think it will need a new script.<br>
Let me know how you get on and I will look into the issue further.<br>
<br>
Graeme</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4637">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4637">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4636" name="comment4636" id="comment4636">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Valerio" width="48">
				
				<span class="commentDate">
		    	Friday, 06 October 2017 11:55		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Valerio			    		    </span>

		    <p>Hello,<br>
<br>
First and foremost thanks for the scripts and instructions - it works beautifully. However I now don't seem able to connect to the internet via ethernet cable anymore, and I also see the icon with the two parallel lines and the red crosses. Any tips?<br>
I am new to RPi, so apologies if it's very obvious. <br>
<br>
Thanks,<br>
<br>
Valerio</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4636">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4636">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4586" name="comment4586" id="comment4586">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Sunday, 24 September 2017 09:03		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Jeff<br>
<br>
It looks like you are using Raspbian Stretch. The script currently is not working on stretch due to changes in the network setup. Works fine on Jessie<br>
<br>
I'm working on a fix but it is unstable at the moment.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4586">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4586">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4584" name="comment4584" id="comment4584">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Jeff Hagedorn" width="48">
				
				<span class="commentDate">
		    	Sunday, 24 September 2017 03:08		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Jeff Hagedorn			    		    </span>

		    <p>$ sudo wpa_cli status<br>
Failed to connect to non-global ctrl_ifname: (nil)  error: No such file or directory<br>
<br>
On a RPi-ZeroW, so ChkWifiUp :<br>
if ! wpa_cli status | grep 'ip_address' &gt;/dev/null 2&gt;&amp;1<br>
<br>
Will always fail.. :(</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4584">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4584">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4512" name="comment4512" id="comment4512">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Friday, 08 September 2017 09:48		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Jon, the wifi network should be available before the desktop comes up, but that is a bit slow.<br>
With wpa_cli checking for ssid you will get true even if the connection has not been made as the ssid will be broadcast. The ip_address check is used because that isn't available until a valid connection to the router has been made. If no ip_address line appears in 10 seconds, or in your case 60 seconds, then it falls back to a hotspot. Using the ssid check will not cause it to fall back to the hotspot if a connection to the router is not successful. This solves the issue if a wifi password is wrong the router connection fails so no IP is issued. The script gives control back to the hotspot.<br>
<br>
Not sure about wpa_cli using the 50.5 ip while scanning. I It should be as long as wlan0 is up it should be able to see SSIDs, Mac addresses and react regardless of IP.<br>
Check that you haven't got both the hotspot and network active as network will take priority.<br>
check sudo systemctl status hostapd and sudo systemctl status dnsmasq. These should be inactive dead if wifi network is active. If they are "Active" the wpa_cli should show "Failed to connect to non-global....." if you get a response then there is an issue in the script as they both shouldn't be up at the same time.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4512">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4512">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4508" name="comment4508" id="comment4508">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Jon Wagner" width="48">
				
				<span class="commentDate">
		    	Friday, 08 September 2017 01:14		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Jon Wagner			    		    </span>

		    <p>Hello again.<br>
Update / correction on my previous message.<br>
I ran into more issues I have them resolved and have all now running with the interfaces section commented out.<br>
1) When trying to connect to a hidden network, my Pi takes a long time. Connection 40 seconds after desktop comes up. Solved by replacing sleep 10 with sleep 60.<br>
2) Script would no longer start AP. wpa_cli shows status "Scanning" with the 50.5 ip address. The test "wpa_cli status | grep "ip_address" is always true. I don't understand why this started happening after my initial tests. Fixed with changing from grep "ip_address" to grep "ssid".<br>
<br>
I have not tried if commenting the interfaces file resolved the above problems.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4508">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4508">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4504" name="comment4504" id="comment4504">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Thursday, 07 September 2017 20:22		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Jon, ok thats a bit odd, my interfaces file looks like this now <br>
<br>
auto lo wlan0<br>
iface lo inet loopback<br>
<br>
iface eth0 inet manual<br>
<br>
allow-hotplug wlan0<br>
#iface wlan0 inet manual<br>
#    wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf<br>
<br>
allow-hotplug wlan1<br>
iface wlan1 inet manual<br>
    wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf<br>
<br>
and so far seems to be working fine with no mods to anything else.<br>
<br>
Couple of suggestions for what you are doing that may be of use, either strip out the first part of the the first part of the main IF section and keep the bit within Else and the bottom, not including ELSE. easier option is duplicate autohotspotN and rename to autohotspotN2. <br>
Change the wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant/wpa_supplicant.conf line so wpa_supplicant.conf is wpa_supplicant2.conf. <br>
create a blank file as wpa_supplicant2.conf in the same path. when signal is high run the new autohotspotN2 file. No wifi will be found and it will go to a hotspot. Then you can still run the original autohotspotN to go back to wifi if needed.<br>
<br>
Yes I will be updating this to work with Stretch soon as I will need it work with it as well before I upgrade myself.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4504">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4504">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4503" name="comment4503" id="comment4503">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Jon Wagner" width="48">
				
				<span class="commentDate">
		    	Thursday, 07 September 2017 18:26		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Jon Wagner			    		    </span>

		    <p>Hi Graeme<br>
I commented out the the static section in the interface file. AP works fine but Pi no longer connects to home WiFi. Also tried with un-comment the iface and wpa_conf lines. Same result. And finally removed the wlan0 from the auto line. Again no connection to home WiFi. I can work with script as-is, so no need to do any further work.<br>
I want to expand the script to read a digital input and on high force AP even if home WiFi in range. Will let you know that worked.<br>
P.S. Do you plan to get this working on Raspbian Stretch?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4503">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4503">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4499" name="comment4499" id="comment4499">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Wednesday, 06 September 2017 22:45		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Jon, I made the hotspot ip static in the network interfaces as there was an issue using Ethernet in hotspot mode to get internet access of which that resolved the issue. The Hotspot IP being active in Network mode has had no issues in my experience, the routers issued ip is used. VNC reports the hotspot ip but will connect using the routers issued ip.<br>
 A secondary Ethernet issue was resolved, which may have been the real cause, so the iface wlan0 inet static section in the interfaces is probably not required. I have briefly tested it and seems to be working but not enough to make an update to the process yet. If you comment out that section in the interfaces file and test it you should find that it still works ok but i can't confirm that yet.<br>
Though this is being written on a pi in hotspot mode through an Ethernet connection :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4499">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4499">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4496" name="comment4496" id="comment4496">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Jon Wagner" width="48">
				
				<span class="commentDate">
		    	Wednesday, 06 September 2017 01:38		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Jon Wagner			    		    </span>

		    <p>Hello Graeme. Great functionality. All works as intended. I need some added functionality so I want to understand the script. My question is about the 'wpa_cli status' command. After running the script the RasPi is connected to my (hidden) home network. The wpa_cli status shows correct bssid and ssid. However the ip_address shows 192.168.50.5, the address of the access point.<br>
Why? What impact may that have?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4496">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4496">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4465" name="comment4465" id="comment4465">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Thursday, 31 August 2017 20:46		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Andreas, If you can't see the ssid being broadcast then hostapd is the issue. check the status with sudo systemctl status -l hostapd see if there are any errors as it sounds like it fails to start. <br>
 <br>
The autohotspot service only runs once at boot up so to run the script again just use sudo /usr/bin/autohotspoN <br>
After it fails as boot can you run the above line and let me know what feedback it gives and what happens and I will look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4465">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4465">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4460" name="comment4460" id="comment4460">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Andreas" width="48">
				
				<span class="commentDate">
		    	Wednesday, 30 August 2017 23:05		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Andreas			    		    </span>

		    <p>Hello, I followed the instructions on a RPi 3 running Raspbian Jessie, connected to my router via ethernet cable.<br>
<br>
When testing the hotspot (by altering the router ssid in "wpa_supplicant.conf") I can ssh into the Pi by using the ethernet interface's ip. Running ifconfig, I see that wlan0 is up and has indeed taken ip 192.168.50.5. Also, checking "sudo systemctl status autohotspot.service" I see the service is running.However, I cannot see the hotspot ssid in my laptop or phone wifi.<br>
<br>
I managed to get it to work by stopping the service, ifdown-ing wlan0 and running the script manually. However, if I reboot, the same thing happens (basically, nothing). Any suggestions on what to do?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4460">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4460">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4441" name="comment4441" id="comment4441">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Sunday, 27 August 2017 13:40		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Zack, sorry for slow response, <br>
The password connect to the wifi hotspot is the one in hosapd.conf file, 1234567890 by defaults. Are you are using a wifi dongle? make sure it can do access point mode. If it doesn't it will be the issue. <br>
<br>
For my pi3 it will connect with a dynamic ip to my router but the hotspot needs to be static. The static ip is listed on the pi but always uses a dynamic ip for me</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4441">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4441">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4401" name="comment4401" id="comment4401">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Zack" width="48">
				
				<span class="commentDate">
		    	Tuesday, 22 August 2017 05:26		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Zack			    		    </span>

		    <p>Hi - terrific script and tutorial. Many thanks. <br>
<br>
Running into two issues. <br>
#1: Can see the hotspot in wifi networks but keeps saying password is incorrect. I confirmed it many times.<br>
<br>
<br>
#2: Instead of a static IP when the pi connects to my wifi network, can it just get and use a dynamic IP?</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4401">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4401">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4342" name="comment4342" id="comment4342">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Friday, 11 August 2017 14:05		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi ahasbini, During development of the script, I tried various combinations between setting the details in the script and in the interfaces file. This setup was the most stable setup to switch modes with. In network mode the ip is from the router, though the static ip is listed, and Ethernet routing works in hotspot mode.<br>
<br>
ipconfig is depreciated so not an option, ip is used now.<br>
<br>
The script is stable and working fine for me but I do plan on doing additional work on the script so I will look at it again then, as I need to finish a different project first.<br>
Thanks for your comment :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4342">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4342">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4338" name="comment4338" id="comment4338">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="ahasbini" width="48">
				
				<span class="commentDate">
		    	Thursday, 10 August 2017 20:59		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    ahasbini			    		    </span>

		    <p>Hey Graeme,<br>
<br>
Thanks for the post, was looking for that recently and was glad to find one.<br>
<br>
I have a question though, I see that the wlan0 is being set to a static ip within the interfaces file, meaning on boot it will be the static ip automatically. I think it might not be necessary as I tried reading the script and see that if it is setting the IP while switching. Could you explain a bit on why that is needed? The reason why I am asking is because I once got RPi3 to hotspot an ethernet internet connection, and had to set the IP just by using ifconfig.<br>
<br>
Here's the link: <a target="_blank" rel="nofollow" href="http://elinux.org/RPI-Wireless-Hotspot">http://elinux.org/RPI-Wireless-Hotspot</a><br>
<br>
It states that if you want things automatic upon boot then alter the interfaces file, if not just use ifconfig to statically set the ip address of wlan0.<br>
<br>
Looking forward,<br>
Thanks :)</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4338">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4338">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4302" name="comment4302" id="comment4302">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Tuesday, 01 August 2017 20:52		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Jogi, I have run my pi through a few swaps between network and hotspot and am not able to replicate your issue. Is this still an issue after a reboot?<br>
This issue seems to be due to dns cache which is not available as standard. Can you see if you have nscd installed, in terminal enter sudo dpkg -s nscd   it should say it is not installed. If it is installed that is probably your issue.<br>
<br>
You can also make sure that the dnsmasq.conf file exactly matches the one in the article. <br>
While in wifi mode enter sudo systemctl status -l dnsmasq  it should say it is Active: inactive (dead)<br>
<br>
If it is still active try disabling it again with sudo systemctl disable dnsmasq<br>
<br>
let me know if this helps. If not send me a few more details about what happens, is it an issue if you reboot between modes rather than run the autohotspot script,  are you using a PI3, do you connect a LAN cable in hotspot mode. Hopefully we can find the issue.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4302">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4302">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4297" name="comment4297" id="comment4297">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Jogi" width="48">
				
				<span class="commentDate">
		    	Tuesday, 01 August 2017 14:01		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Jogi			    		    </span>

		    <p>Thanks for that great example. <br>
<br>
I face the following issue. The transition from Wifi into Hotspotmode works perfectly, but when I try to switch back (running the automode script again with a valid SSID) the networ connection is established and everything looks fine but when I try to access a webpage via the browser I receive the following error code ERR_NAME_Resolution_Failed.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4297">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4297">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4286" name="comment4286" id="comment4286">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Sunday, 30 July 2017 20:11		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Ojas, I would guess if you can't enable it then the file name is wrong of it is not in the correct folder. what message are you getting when you try to enable it? <br>
firstly double check the file exist in the correct location. in terminal enter ls /etc/systemd/system/ you should see autohotspot.service listed. if it is check the spelling if it is not then just create the file again from the guide.<br>
<br>
If autohotspot.service does exist but sudo systemctl enable autohotspot.service is not working then double check the content of the file is ok.<br>
<br>
enableing it means it will start at boot up. you can run the service manually and see if you get any issues. Enter sudo systemctl start autohotspot <br>
then enter sudo systemctl status -l autohotspot it should give you details of the issue.<br>
<br>
If no luck let me know the details of what is happening and I will look into it further.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4286">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4286">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="even">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4285" name="comment4285" id="comment4285">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/user.png" alt="Ojas" width="48">
				
				<span class="commentDate">
		    	Sunday, 30 July 2017 11:03		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    Ojas			    		    </span>

		    <p>Hello............ thanks for this great tutorial.<br>
But I am not able to ebable the autohotspot.service file on my raspberry pi 3. What should I do? <br>
Please help me.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4285">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4285">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	    <li class="odd authorResponse">

	    	<span class="commentLink">
		    	<a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#comment4261" name="comment4261" id="comment4261">
		    		Comment Link		    	</a>
		    </span>

								<img src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/10.jpg" alt="Graeme" width="48">
				
				<span class="commentDate">
		    	Monday, 24 July 2017 00:37		    </span>

		    <span class="commentAuthorName">
			    posted by			    			    <a href="http://www.raspberryconnect.com/network/itemlist/user/269-graeme" title="Graeme" target="_blank" rel="nofollow">
			    	Graeme			    </a>
			    		    </span>

		    <p>Hi Logan, I presume you are connecting on Hotspot mode. Which it will use 192.168.50.5::5900 but it looks like your VNC is configured to use ::5902. You can see which port it is set to in the connection settings on real vnc on the pi. <br>
I have just connected my self using real vnc viewer on a android tablet. My one is setup for ::5900 or :0 so connected fine after a reboot so, im not getting an issue at reboot. <br>
What I have noticed though is when the Pi is connected to the network the Real VNC window show ip address 192.168.50.5 which is wrong. It should be the ip your router issues. in my case 192.168.0.26 and port 5900.<br>
<br>
I think you are getting blank screen because the port has changed, every time you run vncserver it opens a new channel. If the old channel has closed then you won't be able to connect to it. <br>
I did run vncserver 3 times and got 3 new channels but was still able to connect to ::0 as it didnt close. At bootup the channel should be ::0 (::5900) so that should be the one to use<br>
<br>
When you are connected to a router use the ip shown in the Real VNC window under "other ways to connect" that is from your router and not 192.168.50.5<br>
<br>
When you are in hotspot mode use 192.168.50.5<br>
<br>
let me know how you get on.</p>

								<span class="commentToolbar">
					
					

					<a class="modal" rel="{handler:&#39;iframe&#39;,size:{x:600,y:480}}" href="http://www.raspberryconnect.com/network/comments/report?commentID=4261">Report</a>
					
<!-- non modal report comment link
					<a href="/network/comments/report?commentID=4261">Report</a>
					-->
					
										
				</span>
		

				<div class="clr"></div>
	    </li>
	    	  </ul>

	  <div class="itemCommentsPagination">
	  	<ul><li class="pagination-start"><span class="pagenav">Start</span></li><li class="pagination-prev"><span class="pagenav">Prev</span></li><li><span class="pagenav">1</span></li><li><a href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet?start=100" class="pagenav">2</a></li><li class="pagination-next"><a title="" href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet?start=100" class="hasTooltip pagenav" data-original-title="Next">Next</a></li><li class="pagination-end"><a title="" href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet?start=100" class="hasTooltip pagenav" data-original-title="End">End</a></li></ul>	  	<div class="clr"></div>
	  </div>
		
		
	  
  </div>
  
		<div class="itemBackToTop">
		<a class="k2Anchor" href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet#startOfPageId330">
			back to top		</a>
	</div>
	
	<div class="clr"></div>
</div>
<!-- End K2 Item Layout -->

<!-- JoomlaWorks "K2" (v2.8.0) | Learn more about K2 at http://getk2.org -->



                                                </div><!-- end main -->

                                        </div><!-- end wrapper -->

                                                                        <h2 class="unseen">
                                                Additional information                                        </h2>
                                       <!-- Disable right menu collapse option 3 of 3
                          see http://www.cmsmind.com/joomla-2-5-tutorial-how-to-remove-the-close-info-open-info-in-beez-20/ for removed code -->


                                        <div id="right" role="contentinfo">
                                                <a id="additional"></a>
                                                <div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">Cookie Policy</span></span></span></h3>
 

<div class="custom">
	<p><span style="font-size: 0.8em;">Cookies are in use. By continuing to use this website you consent to their use. More details <a href="http://www.raspberryconnect.com/component/content/article/13-base-menu/3-cookies">Cookie Policy</a></span></p></div>
</div>

                                                <div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">Advertising</span></span></span></h3>
 

<div class="custom">
	<div style="margin: 0 15px;">
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Rasp Right Side Bar -->
<ins class="adsbygoogle" style="display:inline-block;width:120px;height:600px" data-ad-client="ca-pub-3533837445035277" data-ad-slot="5682824771" hidden="" kku7c7a=""></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

</div></div>
</div>

                                                
                                        </div><!-- end right -->
                                        
                        
                                <div class="wrap"></div>

                                </div> <!-- end contentarea -->

                        </div><!-- back -->

                </div><!-- all -->

                <div id="footer-outer">
                                                <div id="footer-inner">

                                <div id="bottom">
                                        <div class="box box1"> <div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">Latest Articles</span></span></span></h3>
 
<div id="k2ModuleBox114" class="k2ItemsBlock">

	
	  <ul>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/hardware-add-ons/item/334-raspberry-pi-mega-io-expansion-card">Raspberry Pi Mega-IO Expansion Card</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/network/item/333-raspberry-pi-hotspot-access-point-dhcpcd-method">Raspberry Pi - Hotspot/Access Point dhcpcd method</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/network/item/331-raspberry-pi-auto-wifi-hotspot-switch-direct-connection">Raspberry Pi - Auto WiFi Hotspot Switch - Direct Connection</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/network/item/330-raspberry-pi-auto-wifi-hotspot-switch-internet">Raspberry Pi - Auto WiFi Hotspot Switch Internet</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/pi-base/item/328-google-aiy-voice-hat-customise-voice-commands">Google AIY Voice HAT Customise Voice Commands</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/network/item/327-raspberry-pi-auto-wifi-hotspot-switch">Raspberry Pi - Auto WiFi Hotspot Switch</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/pi-base/item/325-solar-panel-battery-charging-monitor">Solar Panel Battery Charging Monitor</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd lastItem">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/hardware-add-ons/item/324-tsl2561-luminosity-sensor-ir-and-visible-light">TSL2561 Luminosity Sensor &amp; Python (detect IR and visible light)</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="clearList"></li>
  </ul>
  
	
	
</div>
</div>
</div>
                                        <div class="box box2"> <div class="moduletable">
 <h3><span class="backh"><span class="backh2"><span class="backh3">Latest Software</span></span></span></h3>
 
<div id="k2ModuleBox115" class="k2ItemsBlock">

	
	  <ul>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/communication/item/335-sd-the-amateur-radio-contest-logging-software">SD the Amateur Radio Contest Logging Software</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/software-utilities/item/318-easyeda_circuit_simulator_and_pcb_design_software">EasyEDA - Circuit simulator and PCB design software</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/gamessoftware/item/314-trying_out_opengl_on_raspberry_pi_3">Trying out OpenGL on Raspberry Pi 3</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/communication/item/168-dire_wolf">Dire Wolf</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/multi-media/item/157-picamera_python_library">picamera python library</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/operating-system-s/item/143-noobs-new-out-of-the-box-software">Noobs - New Out of The Box Software</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="even">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/software-internet/item/135-software-web-adjuster">Web Adjuster</a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="odd lastItem">

      <!-- Plugins: BeforeDisplay -->
      
      <!-- K2 Plugins: K2BeforeDisplay -->
      
      
            <a class="moduleItemTitle" href="http://www.raspberryconnect.com/gamessoftware/item/127-sw-xinvaders3d-rpi">3D Space Invaders </a>
      
      
      <!-- Plugins: AfterDisplayTitle -->
      
      <!-- K2 Plugins: K2AfterDisplayTitle -->
      
      <!-- Plugins: BeforeDisplayContent -->
      
      <!-- K2 Plugins: K2BeforeDisplayContent -->
      
      
      
      <div class="clr"></div>

      
      <div class="clr"></div>

      <!-- Plugins: AfterDisplayContent -->
      
      <!-- K2 Plugins: K2AfterDisplayContent -->
      
      
      
      
      
			
			
			
      <!-- Plugins: AfterDisplay -->
      
      <!-- K2 Plugins: K2AfterDisplay -->
      
      <div class="clr"></div>
    </li>
        <li class="clearList"></li>
  </ul>
  
	
	
</div>
</div>
</div>
                                        <div class="box box3"> <div class="moduletable">
 <ul class="category-module">
						<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/5-about-us?Itemid=101">
						About Us					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/6-contact-us?Itemid=101">
						Contact Us					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/3-cookies?Itemid=101">
						Cookie Usage					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/4-copyright?Itemid=101">
						Copyright Notice					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/7-help-and-faq?Itemid=101">
						Help and FAQ					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/8-privacy-policy?Itemid=101">
						Privacy Policy					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/12-article-submit?Itemid=101">
						Submit an article					</a>
					
					
					
					
					
					
							</li>
					<li>
									<a class="mod-articles-category-title " href="http://www.raspberryconnect.com/component/content/article/13-base-menu/1-terms?Itemid=101">
						Terms and Conditions					</a>
					
					
					
					
					
					
							</li>
			</ul>
</div>
<div class="moduletable">
 

<div class="custom">
	<iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" class="twitter-follow-button twitter-follow-button-rendered" title="Twitter Follow Button" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/follow_button.b813cd3227574096a07e094b73331535.en-gb.html" style="position: static; visibility: visible; width: 166px; height: 20px;" data-screen-name="RaspberryConnec"></iframe>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
</div>
</div>
                                </div>


                        </div>
                                
                        <div id="footer-sub">


                                <div id="footer">

                                        

<div class="custom">
	<p>&nbsp;</p>
<pre>Copyright RaspberryConnect                        RaspberryConnect is not associated with The Raspberry Pi Foundation in any way</pre>
<p>&nbsp;</p></div>

                                      <!-- Logo Off  <p>
                                                Powered by <a href="http://www.joomla.org/">Joomla!&#174;</a>
                                        </p> -->


                                </div><!-- end footer -->

                        </div>

                </div>
        
        

<iframe scrolling="no" frameborder="0" allowtransparency="true" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/widget_iframe.b813cd3227574096a07e094b73331535.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe name="oauth2relay481013008" id="oauth2relay481013008" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/postmessageRelay.html" tabindex="-1" aria-hidden="true" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/saved_resource.html"></iframe><div style="background-color: #fff; border: 1px solid #ccc; box-shadow: 2px 2px 3px rgba(0, 0, 0, 0.2); position: absolute; left: 0px; top: -10000px; transition: visibility 0s linear 0.3s, opacity 0.3s linear; opacity: 0; visibility: hidden; z-index: 2000000000;"><div style="width: 100%; height: 100%; position: fixed; top: 0px; left: 0px; z-index: 2000000000; background-color: #fff; opacity: 0.05;  filter: alpha(opacity=5)"></div><div class="g-recaptcha-bubble-arrow" style="border: 11px solid transparent; width: 0; height: 0; position: absolute; pointer-events: none; margin-top: -11px; z-index: 2000000000;"></div><div class="g-recaptcha-bubble-arrow" style="border: 10px solid transparent; width: 0; height: 0; position: absolute; pointer-events: none; margin-top: -10px; z-index: 2000000000;"></div><div style="z-index: 2000000000; position: relative;"><iframe title=" recaptcha" src="./Raspberry Connect - Raspberry Pi - Auto WiFi Hotspot Switch Internet_files/bframe.html" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox" name="5kghukkkvulo" style="width: 100%; height: 100%;"></iframe></div></div></body></html>